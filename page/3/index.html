<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="ç®€ä½“ä¸­æ–‡">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta property="og:type" content="website">
<meta property="og:title" content="å¼ å¥‡æ€ªçš„blog">
<meta property="og:url" content="https://zhanghongtong.github.io/page/3/index.html">
<meta property="og:site_name" content="å¼ å¥‡æ€ªçš„blog">
<meta property="og:locale" content="ç®€ä½“ä¸­æ–‡">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="å¼ å¥‡æ€ªçš„blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://zhanghongtong.github.io/page/3/"/>





  <title>å¼ å¥‡æ€ªçš„blog</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="ç®€ä½“ä¸­æ–‡">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">å¼ å¥‡æ€ªçš„blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://zhanghongtong.github.io/2018/06/14/ä½¿ç”¨dockerå®‰è£…nginxå’Œphp-fpmæœåŠ¡/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="å¼ å¥‡æ€ª">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¼ å¥‡æ€ªçš„blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/14/ä½¿ç”¨dockerå®‰è£…nginxå’Œphp-fpmæœåŠ¡/" itemprop="url">ä½¿ç”¨dockerå®‰è£…nginxå’Œphp-fpmæœåŠ¡</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-14T16:55:12+08:00">
                2018-06-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/æœåŠ¡å™¨/" itemprop="url" rel="index">
                    <span itemprop="name">æœåŠ¡å™¨</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>ä¹‹å‰ä½¿ç”¨dockeréƒ½æ˜¯ç›´æ¥å½“åšè™šæ‹Ÿæœºæ¥ç”¨ï¼Œç›´æ¥pullä¸€ä¸ªubuntuçš„é•œåƒï¼Œç„¶åå†é‡Œé¢å®‰è£…å„ç§æœåŠ¡ã€‚åæ¥å‘ç°dockerçš„æ­£ç¡®ç”¨æ³•åº”è¯¥æ˜¯èµ·å¤šä¸ªå®¹å™¨ï¼Œä¸€ä¸ªå®¹å™¨ä¸€ä¸ªè¿›ç¨‹ï¼ŒåŒ…å«ç¨‹åºç›¸å…³çš„ä¸Šä¸‹æ–‡ï¼Œæš‚æ—¶æ‹¿æœ€å¸¸ç”¨çš„nginx+php-fpmçš„æœåŠ¡æ¥ç»ƒæ‰‹ã€‚</p>
<h3 id="å®æˆ˜"><a href="#å®æˆ˜" class="headerlink" title="å®æˆ˜"></a>å®æˆ˜</h3><p>åº”ä¸ºç”Ÿäº§ç¯å¢ƒä¸€ç›´ä½¿ç”¨çš„æ˜¯é˜¿é‡Œäº‘çš„å®¹å™¨æœåŠ¡ï¼Œæ‡’å¾—è‡ªå·±æ­äº†ï¼Œç›´æ¥åœ¨é˜¿é‡Œäº‘çš„å®¹å™¨æœåŠ¡ä¸Šç»§ç»­è¯•éªŒ</p>
<p>1ã€åˆ›å»ºåº”ç”¨ï¼ŒDocker Composeçš„é…ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">php:</span><br><span class="line">  image: &apos;php:5.6-fpm&apos;		</span><br><span class="line">  volumes:</span><br><span class="line">    - &apos;/docker_test/www:/var/www:rw&apos;</span><br><span class="line">  mem_limit: 0</span><br><span class="line">  kernel_memory: 0</span><br><span class="line">  memswap_reservation: 0</span><br><span class="line">  restart: always</span><br><span class="line">  environment:</span><br><span class="line">        - &apos;constraint:aliyun.node_index==5&apos;</span><br><span class="line">  shm_size: 0</span><br><span class="line">  memswap_limit: 0</span><br><span class="line">  labels:</span><br><span class="line">    aliyun.scale: &apos;1&apos;</span><br><span class="line">  tty: true</span><br><span class="line">  </span><br><span class="line">nginx:</span><br><span class="line">  image: &apos;nginx:latest&apos;</span><br><span class="line">  volumes:</span><br><span class="line">    - &apos;/docker_test/www:/var/www:rw&apos;</span><br><span class="line">  ports:</span><br><span class="line">    - &apos;8090:80/tcp&apos;</span><br><span class="line">  mem_limit: 0</span><br><span class="line">  kernel_memory: 0</span><br><span class="line">  memswap_reservation: 0</span><br><span class="line">  restart: always</span><br><span class="line">  environment:</span><br><span class="line">        - &apos;constraint:aliyun.node_index==5&apos;</span><br><span class="line">  shm_size: 0</span><br><span class="line">  memswap_limit: 0</span><br><span class="line">  labels:</span><br><span class="line">    aliyun.scale: &apos;1&apos;</span><br><span class="line">  tty: true</span><br></pre></td></tr></table></figure>
<p>å¸¸è§„æ“ä½œï¼Œæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ç›®å‰phpåœ¨docker hubçš„æœ€æ–°é•œåƒä¸º7.2ï¼Œæœ¬æ¬¡å…ˆä½¿ç”¨5.6-fpmçš„ç‰ˆæœ¬(è²Œä¼¼é•œåƒæœ‰fpmå’Œcilä¹‹åˆ†ï¼Œæ‹‰å–æ—¶éœ€è¦æ³¨æ„)ï¼Œå¦å¤–ä¸¤ä¸ªå®¹å™¨éƒ½æ˜ å°„äº†<code>/var/www</code>ç›®å½•ã€‚</p>
<p>2ã€ä½¿ç”¨ <code>docker ps -a</code> å‘½ä»¤æŸ¥çœ‹åˆ›å»ºçš„å®¹å™¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># docker ps -a</span><br><span class="line">CONTAINER ID		IMAGE			COMMAND				CREATED					STATUS		PORTS				NAMES                                                                                                        a22c7473cd43        nginx:latest 	&quot;nginx -g &apos;daemon ...&quot;   6 hours ago         Up 6 hours          0.0.0.0:8090-&gt;80/tcp	test_nginx_1                                                                            </span><br><span class="line">b8273c6825f9        php:5.6-fpm    &quot;docker-php-entryp...&quot;   6 hours ago         Up 6 hours          9000/tcp               test_php_1</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°æˆåŠŸçš„åˆ›å»ºäº†ä¸¤ä¸ªå®¹å™¨ï¼Œphp-fpmçš„å®¹å™¨é»˜è®¤ä½¿ç”¨9000ç«¯å£ï¼Œå¯ä»¥ä½¿ç”¨ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºçš„å…¶ä»–ç«¯å£ï¼Œä½¿ç”¨<code>docker inspect</code>å‘½ä»¤æŸ¥çœ‹phpå®¹å™¨çš„å†…ç½‘IPï¼Œæ–¹ä¾¿ä¿®æ”¹nginxçš„é…ç½®é¡¹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># docker inspect test_php_1 | grep &quot;IPAddress&quot;     </span><br><span class="line">&quot;SecondaryIPAddresses&quot;: null,</span><br><span class="line">&quot;IPAddress&quot;: &quot;&quot;,</span><br><span class="line">&quot;IPAddress&quot;: &quot;172.18.0.5&quot;,</span><br></pre></td></tr></table></figure>
<p><code>docker inspect</code> å‘½ä»¤å¯ä»¥æŸ¥çœ‹å®¹å™¨çš„è¯¦ç»†ä¿¡æ¯ï¼Œä½¿ç”¨ç®¡é“å‘½ä»¤åªè¾“å‡ºIPAddress</p>
<p>3ã€ä¿®æ”¹nginxçš„ç›¸å…³é…ç½®</p>
<p>ä½¿ç”¨ <code>docker exec -it test_nginx_1 /bin/bash</code>  å‘½ä»¤ç™»å½•åˆ°å®¹å™¨å†…éƒ¨ï¼ŒæŸ¥çœ‹é…ç½®çš„ç›¸å…³æ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°nginxçš„é…ç½®æ–‡ä»¶è·¯å¾„ä¸º  <code>/etc/nginx/conf.d/default.conf</code>å’Œ <code>/etc/nginx/nginx.conf</code></p>
<p>åœ¨å®¹å™¨ä¸­æ˜¯æ²¡æœ‰vimå‘½ä»¤çš„ï¼Œæ‰€ä»¥ä¸èƒ½åœ¨å®¹å™¨ä¸­ç›´æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥å°†é…ç½®æ–‡ä»¶æ˜ å°„åˆ°å®¿ä¸»æœºç›®å½•ç¼–è¾‘ï¼Œæˆ–è€…ä½¿ç”¨docker cpå‘½ä»¤å°†é…ç½®æ–‡ä»¶å¤åˆ¶åˆ°å®¿ä¸»æœºè¿›è¡Œç¼–è¾‘ï¼Œè¿™é‡Œä½¿ç”¨docker cpå‘½ä»¤</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#docker cp test_nginx_1:/etc/nginx/conf.d/default.conf ./default.conf</span><br></pre></td></tr></table></figure>
<p>ç¼–è¾‘<code>default.conf</code>ä¸­phpçš„éƒ¨åˆ†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">location ~ \.php$ &#123;</span><br><span class="line">        root           /var/www;</span><br><span class="line">        fastcgi_pass   172.18.0.5:9000;</span><br><span class="line">        fastcgi_index  index.php;</span><br><span class="line">        fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span><br><span class="line">       </span><br><span class="line">        include        fastcgi_params;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><code>fastcgi_pass</code>çš„é…ç½®ä¸ºphpå®¹å™¨çš„ip</p>
<p>ä¿å­˜åä½¿ç”¨<code>docker cp</code>å‘½ä»¤å°†é…ç½®æ–‡ä»¶å¤åˆ¶å›å®¹å™¨é‡Œï¼Œè¿›å…¥å®¹å™¨é‡æ–°è½½å…¥nginx</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#docker cp ./default.conf test_nginx_1:/etc/nginx/conf.d/default.conf</span><br><span class="line">#docker exec -it test_nginx_1 /bin/bash</span><br><span class="line">#nginx -s reload</span><br></pre></td></tr></table></figure>
<p>åœ¨å®¿ä¸»æœº<code>/docker_test/www</code>é‡Œé¢æ–°å»º<code>test.php</code>ï¼Œä½¿ç”¨æµè§ˆå™¨è®¿é—® <code>http://å®¿ä¸»æœºIP:8090/test.php</code>ã€‚åº”è¯¥å¯ä»¥æ­£å¸¸è®¿é—®äº†ã€‚</p>
<p>4ã€ä¸€ç‚¹è¡¥å……</p>
<p>å®é™…æµ‹è¯•ä¸­è®¿é—®nginxå‘ç°æŠ¥é”™ File not foundï¼Œè¿™ä¸ªé”™è¯¯å¾ˆå¸¸è§ï¼Œä¸€èˆ¬æ¥è¯´åŸå› æ˜¯ä¸‹é¢ä¸¤ç§</p>
<ol>
<li>php-fpmæ‰¾ä¸åˆ°SCRIPT_FILENAMEé‡Œæ‰§è¡Œçš„phpæ–‡ä»¶</li>
<li>php-fpmä¸èƒ½è®¿é—®æ‰€æ‰§è¡Œçš„phpï¼Œä¹Ÿå°±æ˜¯æƒé™é—®é¢˜</li>
</ol>
<p>é’ˆå¯¹ç¬¬ä¸€ç§æƒ…å†µçš„è¯ï¼Œç¼–è¾‘nginxçš„default.confæ–‡ä»¶ï¼Œå°†phpé…ç½®ä¸­çš„<code>fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name</code>ä¿®æ”¹ä¸º<code>fastcgi_param   SCRIPT_FILENAME    $document_root$fastcgi_script_name;</code>å°±å¯ä»¥äº†</p>
<p>é’ˆå¯¹ç¬¬äºŒç§æƒ…å†µï¼Œè¿›å…¥phpçš„å®¹å™¨ï¼Œæ‰¾åˆ°php-fpmçš„é…ç½®æ–‡ä»¶ï¼Œphp5.6-fpmçš„é•œåƒçš„è¯é…ç½®æ–‡ä»¶åœ¨ <code>/usr/local/etc/php-fpm.d/www.conf</code> ä¸­ï¼Œæ‰¾åˆ°ä¸‹é¢ä¸€è¡Œé…ç½®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">; Unix user/group of processes</span><br><span class="line">; Note: The user is mandatory. If the group is not set, the default user&apos;s group</span><br><span class="line">;       will be used.</span><br><span class="line">user = www-data</span><br><span class="line">group = www-data</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹.phpæ–‡ä»¶çš„æ‰€å±æˆ–è€…æ˜¯ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„è¿™ä¸¤ä¸ªé¡¹ç›®éƒ½å¯ä»¥ï¼Œæœ¬æ¬¡é€‰æ‹©çš„æ˜¯ä¿®æ”¹phpæ–‡ä»¶çš„æ‰€å±</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#chown â€”R www-data:www-data /var/www</span><br></pre></td></tr></table></figure>
<p>5ã€å†è¡¥å……ä¸€ç‚¹</p>
<p>å®é™…æµ‹è¯•ä¸­å‘ç°nginxä¸äº§ç”Ÿæ—¥å¿—æ–‡ä»¶ï¼ŒæŒ‰ç…§ä»¥å‰çš„æ€è·¯æ€ä¹ˆä¿®æ”¹<code>nginx.conf</code>æ€ä¹ˆéƒ½ä¸è¡Œï¼Œåæ¥å‘ç°éœ€è¦ä¿®æ”¹<code>default.conf</code> ï¼Œçœ‹æ¥nginxçš„é•œåƒå’Œubuntuä¸‹ç›´æ¥å®‰è£…çš„nginxè¿˜æ˜¯æœ‰ä¸€å®šçš„åŒºåˆ«çš„ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://zhanghongtong.github.io/2018/06/07/gitPullåæ¢å¤åˆ°åŸæ¥ç‰ˆæœ¬/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="å¼ å¥‡æ€ª">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¼ å¥‡æ€ªçš„blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/07/gitPullåæ¢å¤åˆ°åŸæ¥ç‰ˆæœ¬/" itemprop="url">git pull åæ¢å¤åˆ°åŸæ¥ç‰ˆæœ¬</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-07T17:38:39+08:00">
                2018-06-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/æœåŠ¡å™¨/" itemprop="url" rel="index">
                    <span itemprop="name">æœåŠ¡å™¨</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-é—®é¢˜"><a href="#1-é—®é¢˜" class="headerlink" title="1 é—®é¢˜"></a>1 é—®é¢˜</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull åå‘ç°æ­¤ç‰ˆæœ¬ä¸æ˜¯æƒ³è¦çš„ç‰ˆæœ¬ï¼Œä½†pullåçš„ç‰ˆæœ¬ï¼Œåœ¨æˆ‘çš„å½“å‰åˆ†æ”¯ç‰ˆæœ¬åŸºç¡€ä¸Šåˆè¿­ä»£äº†Nä¸ªç‰ˆæœ¬ã€‚</span><br></pre></td></tr></table></figure>
<h3 id="2-æ¢å¤åˆ°æœ¬åˆ†æ”¯çš„åŸæ¥ç‰ˆæœ¬"><a href="#2-æ¢å¤åˆ°æœ¬åˆ†æ”¯çš„åŸæ¥ç‰ˆæœ¬" class="headerlink" title="2 æ¢å¤åˆ°æœ¬åˆ†æ”¯çš„åŸæ¥ç‰ˆæœ¬"></a>2 æ¢å¤åˆ°æœ¬åˆ†æ”¯çš„åŸæ¥ç‰ˆæœ¬</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1ã€git reflog master  (æŸ¥çœ‹æœ¬åœ°masteråˆ†æ”¯å†å²å˜åŠ¨çºªå½•)</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdn.net/20161114114953641" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2ã€git reset --hard &lt;COMMIT_ID&gt; ï¼ˆæ¢å¤åˆ°ä¹‹å‰ä½ç½®ï¼‰</span><br><span class="line">   git reset --hard master@&#123;1&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://zhanghongtong.github.io/2018/05/29/Let'sEncryptä½¿ç”¨æ•™ç¨‹ï¼Œå…è´¹çš„SSLè¯ä¹¦ï¼Œè®©ä½ çš„ç½‘ç«™æ‹¥æŠ±HTTPS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="å¼ å¥‡æ€ª">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¼ å¥‡æ€ªçš„blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/29/Let'sEncryptä½¿ç”¨æ•™ç¨‹ï¼Œå…è´¹çš„SSLè¯ä¹¦ï¼Œè®©ä½ çš„ç½‘ç«™æ‹¥æŠ±HTTPS/" itemprop="url">Let's Encrypt ä½¿ç”¨æ•™ç¨‹ï¼Œå…è´¹çš„ SSL è¯ä¹¦ï¼Œè®©ä½ çš„ç½‘ç«™æ‹¥æŠ± HTTPS</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-29T10:42:37+08:00">
                2018-05-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/æœåŠ¡å™¨/" itemprop="url" rel="index">
                    <span itemprop="name">æœåŠ¡å™¨</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Letâ€™s-Encrypt-ç®€ä»‹"><a href="#Letâ€™s-Encrypt-ç®€ä»‹" class="headerlink" title="Letâ€™s Encrypt ç®€ä»‹"></a>Letâ€™s Encrypt ç®€ä»‹</h3><p>Letâ€™s Encrypt æ˜¯å›½å¤–ä¸€ä¸ªå…¬å…±çš„å…è´¹SSLé¡¹ç›®ï¼Œç”± Linux åŸºé‡‘ä¼šæ‰˜ç®¡ï¼Œå®ƒçš„æ¥å¤´ä¸å°ï¼Œç”± Mozillaã€æ€ç§‘ã€Akamaiã€IdenTrust å’Œ EFF ç­‰ç»„ç»‡å‘èµ·ï¼Œç›®çš„å°±æ˜¯å‘ç½‘ç«™è‡ªåŠ¨ç­¾å‘å’Œç®¡ç†å…è´¹è¯ä¹¦ï¼Œä»¥ä¾¿åŠ é€Ÿäº’è”ç½‘ç”± HTTP è¿‡æ¸¡åˆ° HTTPSï¼Œç›®å‰ Facebook ç­‰å¤§å…¬å¸å¼€å§‹åŠ å…¥èµåŠ©è¡Œåˆ—ã€‚</p>
<p>Letâ€™s Encrypt å·²ç»å¾—äº† IdenTrust çš„äº¤å‰ç­¾åï¼Œè¿™æ„å‘³ç€å…¶è¯ä¹¦ç°åœ¨å·²ç»å¯ä»¥è¢« Mozillaã€Googleã€Microsoft å’Œ Apple ç­‰ä¸»æµçš„æµè§ˆå™¨æ‰€ä¿¡ä»»ï¼Œä½ åªéœ€è¦åœ¨ Web æœåŠ¡å™¨è¯ä¹¦é“¾ä¸­é…ç½®äº¤å‰ç­¾åï¼Œæµè§ˆå™¨å®¢æˆ·ç«¯ä¼šè‡ªåŠ¨å¤„ç†å¥½å…¶å®ƒçš„ä¸€åˆ‡ï¼ŒLetâ€™s Encrypt å®‰è£…ç®€å•ï¼Œä½¿ç”¨éå¸¸æ–¹ä¾¿ã€‚</p>
<h3 id="Certbot-ç®€ä»‹"><a href="#Certbot-ç®€ä»‹" class="headerlink" title="Certbot ç®€ä»‹"></a>Certbot ç®€ä»‹</h3><p><a href="https://certbot.eff.org/" target="_blank" rel="noopener">Certbot</a> ä¸º Letâ€™s Encrypt é¡¹ç›®å‘å¸ƒäº†ä¸€ä¸ªå®˜æ–¹çš„å®¢æˆ·ç«¯ Certbot ï¼Œåˆ©ç”¨å®ƒå¯ä»¥å®Œå…¨è‡ªåŠ¨åŒ–çš„è·å–ã€éƒ¨ç½²å’Œæ›´æ–°å®‰å…¨è¯ä¹¦ï¼Œå¹¶ä¸” Certbot æ˜¯æ”¯æŒæ‰€æœ‰ Unix å†…æ ¸çš„æ“ä½œç³»ç»Ÿã€‚</p>
<p><a href="https://certbot.eff.org/" target="_blank" rel="noopener">Certbot</a> å¯ä»¥è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦å¹¶é…ç½®nginxï¼Œä½†æ˜¯å¯¹ubuntuçš„æ”¯æŒä¸æ˜¯å¾ˆå¥½ï¼Œä¸‹é¢è®°å½•çš„æ˜¯æ‰‹åŠ¨ç”Ÿæˆè¯ä¹¦å¹¶é…ç½®nginxçš„æ–¹æ³•ã€‚</p>
<h3 id="å®‰è£…-Certbot-å®¢æˆ·ç«¯"><a href="#å®‰è£…-Certbot-å®¢æˆ·ç«¯" class="headerlink" title="å®‰è£… Certbot å®¢æˆ·ç«¯"></a>å®‰è£… Certbot å®¢æˆ·ç«¯</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get install software-properties-common</span><br><span class="line">$ sudo add-apt-repository ppa:certbot/certbot</span><br><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get install python-certbot-nginx </span><br><span class="line">$ sodo apt install certbot # ubuntu</span><br></pre></td></tr></table></figure>
<h3 id="Certbot-çš„ä¸¤ç§ä½¿ç”¨æ–¹å¼"><a href="#Certbot-çš„ä¸¤ç§ä½¿ç”¨æ–¹å¼" class="headerlink" title="Certbot çš„ä¸¤ç§ä½¿ç”¨æ–¹å¼"></a>Certbot çš„ä¸¤ç§ä½¿ç”¨æ–¹å¼</h3><ol>
<li><em>webroot</em> æ–¹å¼ï¼š certbot ä¼šåˆ©ç”¨æ—¢æœ‰çš„ web serverï¼Œåœ¨å…¶ web root ç›®å½•ä¸‹åˆ›å»ºéšè—æ–‡ä»¶ï¼ŒLetâ€™s Encrypt æœåŠ¡ç«¯ä¼šé€šè¿‡åŸŸåæ¥è®¿é—®è¿™äº›éšè—æ–‡ä»¶ï¼Œä»¥ç¡®è®¤ä½ çš„ç¡®æ‹¥æœ‰å¯¹åº”åŸŸåçš„æ§åˆ¶æƒã€‚</li>
<li><em>standalone</em> æ–¹å¼ï¼š Certbot ä¼šè‡ªå·±è¿è¡Œä¸€ä¸ª web server æ¥è¿›è¡ŒéªŒè¯ã€‚å¦‚æœæˆ‘ä»¬è‡ªå·±çš„æœåŠ¡å™¨ä¸Šå·²ç»æœ‰ web server æ­£åœ¨è¿è¡Œ ï¼ˆæ¯”å¦‚ Nginx æˆ– Apache ï¼‰ï¼Œç”¨ standalone æ–¹å¼çš„è¯éœ€è¦å…ˆå…³æ‰å®ƒï¼Œä»¥å…å†²çªã€‚</li>
</ol>
<h3 id="è·å–è¯ä¹¦"><a href="#è·å–è¯ä¹¦" class="headerlink" title="è·å–è¯ä¹¦"></a>è·å–è¯ä¹¦</h3><h4 id="webroot-æ¨¡å¼"><a href="#webroot-æ¨¡å¼" class="headerlink" title="webroot æ¨¡å¼"></a>webroot æ¨¡å¼</h4><p>ä½¿ç”¨è¿™ç§æ¨¡å¼ä¼šåœ¨ web root ä¸­åˆ›å»º .well-known æ–‡ä»¶å¤¹ï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹é‡Œé¢åŒ…å«äº†ä¸€äº›éªŒè¯æ–‡ä»¶ï¼ŒCertbot ä¼šé€šè¿‡è®¿é—® <a href="http://example.com/.well-known/acme-challenge" target="_blank" rel="noopener">example.com/.well-known/acme-challenge</a> æ¥éªŒè¯ä½ çš„åŸŸåæ˜¯å¦ç»‘å®šçš„è¿™ä¸ªæœåŠ¡å™¨ï¼Œæ‰€ä»¥éœ€è¦ç¼–è¾‘ nginx é…ç½®æ–‡ä»¶ç¡®ä¿å¯ä»¥è®¿é—®åˆšåˆšåˆ›å»ºçš„ .well-known æ–‡ä»¶å¤¹åŠé‡Œè¾¹å­˜æ”¾çš„éªŒè¯æ–‡ä»¶ï¼Œä»¥ä¾¿åœ¨ç”Ÿæˆè¯ä¹¦æ—¶è¿›è¡ŒéªŒè¯ï¼š</p>
<p>ä½¿ç”¨ä¸€ä¸‹å‘½ä»¤æŸ¥çœ‹ nginx é…ç½®æ–‡ä»¶åœ°å€ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo nginx -t</span><br><span class="line">nginx: the configuration file /usr/local/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /usr/local/nginx/nginx.conf test is successful</span><br></pre></td></tr></table></figure>
<p>ç¼–è¾‘ /usr/local/nginx/nginx.conf é…ç½®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    location /.well-known/acme-challenge/ &#123;</span><br><span class="line">        default_type &quot;text/plain&quot;;</span><br><span class="line">        root /var/www/example;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‡å¯ nginx æœåŠ¡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ nginx -s reload</span><br></pre></td></tr></table></figure>
<p>è·å–è¯ä¹¦ï¼Œ<code>--email</code> ä¸ºç”³è¯·è€…é‚®ç®±ï¼Œ<code>--webroot</code> ä¸º webroot æ–¹å¼ï¼Œ<code>-w</code> ä¸ºç«™ç‚¹ç›®å½•ï¼Œ<code>-d</code> ä¸ºè¦åŠ  https çš„åŸŸåï¼Œä»¥ä¸‹å‘½ä»¤ä¼šä¸º <a href="http://example.com/" target="_blank" rel="noopener">example.com</a> å’Œ <a href="http://www.example.com/" target="_blank" rel="noopener">www.example.com</a> è¿™ä¸¤ä¸ªåŸŸåç”Ÿæˆä¸€ä¸ªè¯ä¹¦ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ certbot certonly --email admin@example.com --webroot -w /var/www/example -d example.com -d www.example.com</span><br></pre></td></tr></table></figure>
<h4 id="standalone-æ¨¡å¼è·å–è¯ä¹¦"><a href="#standalone-æ¨¡å¼è·å–è¯ä¹¦" class="headerlink" title="standalone æ¨¡å¼è·å–è¯ä¹¦"></a>standalone æ¨¡å¼è·å–è¯ä¹¦</h4><p>ä½†æ˜¯æœ‰äº›æ—¶å€™æˆ‘ä»¬çš„ä¸€äº›æœåŠ¡å¹¶æ²¡æœ‰æ ¹ç›®å½•ï¼Œä¾‹å¦‚ä¸€äº›å¾®æœåŠ¡ï¼Œè¿™æ—¶å€™ä½¿ç”¨ webroot æ¨¡å¼å°±èµ°ä¸é€šäº†ã€‚è¿™æ—¶å¯ä»¥ä½¿ç”¨æ¨¡å¼ standalone æ¨¡å¼ï¼Œè¿™ç§æ¨¡å¼ä¸éœ€è¦æŒ‡å®šç½‘ç«™æ ¹ç›®å½•ï¼Œä»–ä¼šè‡ªåŠ¨å¯ç”¨æœåŠ¡å™¨çš„443ç«¯å£ï¼Œæ¥éªŒè¯åŸŸåçš„å½’å±ã€‚æˆ‘ä»¬æœ‰å…¶ä»–æœåŠ¡ï¼ˆä¾‹å¦‚nginxï¼‰å ç”¨äº†443ç«¯å£ï¼Œå°±å¿…é¡»å…ˆåœæ­¢è¿™äº›æœåŠ¡ï¼Œåœ¨è¯ä¹¦ç”Ÿæˆå®Œæ¯•åï¼Œå†å¯ç”¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ certbot certonly --email admin@example.com --standalone -d example.com -d www.example.com</span><br></pre></td></tr></table></figure>
<h3 id="nginx-å¼€å¯-https"><a href="#nginx-å¼€å¯-https" class="headerlink" title="nginx å¼€å¯ https"></a>nginx å¼€å¯ https</h3><p>è¯ä¹¦ç”Ÿæˆå®Œæˆåå¯ä»¥åˆ° /etc/letsencrypt/live/ ç›®å½•ä¸‹æŸ¥çœ‹å¯¹åº”åŸŸåçš„è¯ä¹¦æ–‡ä»¶ã€‚ç¼–è¾‘ nginx é…ç½®æ–‡ä»¶ç›‘å¬ 443 ç«¯å£ï¼Œå¯ç”¨ SSLï¼Œå¹¶é…ç½® SSL çš„å…¬é’¥ã€ç§é’¥è¯ä¹¦è·¯å¾„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line"></span><br><span class="line">    listen       443;</span><br><span class="line">    server_name  example.com;</span><br><span class="line">    root         /var/www/example;</span><br><span class="line">    index        index.html index.htm;</span><br><span class="line"></span><br><span class="line">    ssl on;</span><br><span class="line">    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;</span><br><span class="line">    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;</span><br><span class="line"></span><br><span class="line">    charset utf-8;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ·»åŠ  HTTP è·³è½¬åˆ° HTTPSï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name example.com;</span><br><span class="line">    return 301 https://$server_name$request_uri;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‡å¯ nginx æœåŠ¡ï¼Œè®¿é—® <a href="https://example.com/" target="_blank" rel="noopener">https://example.com</a> æŸ¥çœ‹æ˜¯å¦é…ç½®æˆåŠŸ</p>
<h3 id="è‡ªåŠ¨ç»­æœŸ"><a href="#è‡ªåŠ¨ç»­æœŸ" class="headerlink" title="è‡ªåŠ¨ç»­æœŸ"></a>è‡ªåŠ¨ç»­æœŸ</h3><p>Letâ€™s Encrypt æä¾›çš„è¯ä¹¦åªæœ‰90å¤©çš„æœ‰æ•ˆæœŸï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åœ¨åœ¨è¯ä¹¦åˆ°æœŸä¹‹å‰é‡æ–°è·å–è¿™äº›è¯ä¹¦ï¼ŒCertbot æä¾›äº†ä¸€ä¸ªæ–¹ä¾¿çš„å‘½ä»¤ <code>certbot renew</code>ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆä½¿ç”¨ <code>--dry-run</code> æµ‹è¯•æ˜¯å¦å¯ç”¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ certbot renew --dry-run</span><br></pre></td></tr></table></figure>
<p>linux ç³»ç»Ÿä¸Šæœ‰ cron å¯ä»¥æ¥æå®šè¿™ä»¶äº‹æƒ…ï¼Œä½¿ç”¨ä¸€ä¸‹å‘½ä»¤æ–°å»ºä»»åŠ¡ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ crontab -e</span><br></pre></td></tr></table></figure>
<p>å†™å…¥ä¸€ä¸‹ä»»åŠ¡å†…å®¹ã€‚è¿™æ®µå†…å®¹çš„æ„æ€å°±æ˜¯ æ¯éš” ä¸¤ä¸ªæœˆçš„ å‡Œæ™¨ 2:15 æ‰§è¡Œ æ›´æ–°æ“ä½œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">15 2 * */2 * certbot renew --quiet --renew-hook &quot;service nginx restart&quot;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>è¡¨è¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>â€“quiet</td>
<td>æ‰§è¡Œæ—¶å±è”½é”™è¯¯ä»¥å¤–çš„æ‰€æœ‰è¾“å‡ºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ -q</td>
</tr>
<tr>
<td>â€“pre-hook</td>
<td>æ‰§è¡Œæ›´æ–°æ“ä½œä¹‹å‰è¦åšçš„äº‹æƒ…</td>
</tr>
<tr>
<td>â€“pre-hook</td>
<td>æ‰§è¡Œæ›´æ–°æ“ä½œä¹‹å‰è¦åšçš„äº‹æƒ…</td>
</tr>
<tr>
<td>â€“post-hook</td>
<td>æ‰§è¡Œæ›´æ–°æ“ä½œå®Œæˆåè¦åšçš„äº‹æƒ…</td>
</tr>
</tbody>
</table>
<h3 id="å–æ¶ˆè¯ä¹¦"><a href="#å–æ¶ˆè¯ä¹¦" class="headerlink" title="å–æ¶ˆè¯ä¹¦"></a>å–æ¶ˆè¯ä¹¦</h3><p>å¯ä»¥ä½¿ç”¨ä¸€ä¸‹å‘½ä»¤å–æ¶ˆåˆšåˆšç”Ÿæˆçš„å¯†åŒ™ï¼Œä¹Ÿå°±æ˜¯ä»¥ä¸Šçš„åæ“ä½œï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ certbot revoke --cert-path /etc/letsencrypt/live/example.com/cert.pem</span><br><span class="line">$ certbot delete --cert-name example.com</span><br></pre></td></tr></table></figure>
<p>è‡³æ­¤ï¼Œæ•´ä¸ªç½‘ç«™å‡çº§åˆ° HTTPS å°±å®Œæˆäº†ã€‚</p>
<h3 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h3><ol>
<li>å¦‚æœåŠ ä¸Š HTTPS ä¹‹åğŸ˜Šé”ä¸å¤Ÿç»¿çš„è¯ï¼Œæ£€æŸ¥ä¸‹ç«™ç‚¹åŠ è½½çš„èµ„æºï¼ˆæ¯”å¦‚ jsã€cssã€ç…§ç‰‡ç­‰ï¼‰æ˜¯ä¸æ˜¯æœ‰ HTTP çš„ï¼Œæœ‰çš„è¯å°±ä¼šå¯¼è‡´å°é”å˜ä¸ºç°è‰²ã€‚</li>
<li>åœ¨æˆ‘ä»¬ä½¿ç”¨ HTTP çš„æ—¶å€™ï¼Œæ‰“å¼€ç½‘é¡µæ€»ä¼šé‡åˆ°ç¬¬ä¸‰æ–¹å·å·åŠ çš„ä¸€äº›è„šæœ¬å¹¿å‘Šï¼Œå¾ˆæ˜¯çƒ¦äººï¼Œå‡çº§ HTTPS åä»–ä»¬å°±æ— ä»ä¸‹æ‰‹äº†ï¼Œæ¬§è€¶ã€‚</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://zhanghongtong.github.io/2018/05/15/å¯èƒ½æ˜¯æœ€å¥½çš„ss-paneléƒ¨ç½²æ•™ç¨‹/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="å¼ å¥‡æ€ª">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¼ å¥‡æ€ªçš„blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/15/å¯èƒ½æ˜¯æœ€å¥½çš„ss-paneléƒ¨ç½²æ•™ç¨‹/" itemprop="url">å¯èƒ½æ˜¯æœ€å¥½çš„ss-paneléƒ¨ç½²æ•™ç¨‹</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-15T15:12:33+08:00">
                2018-05-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/æœåŠ¡å™¨/" itemprop="url" rel="index">
                    <span itemprop="name">æœåŠ¡å™¨</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="å¯èƒ½æ˜¯æœ€å¥½çš„-ss-panel-éƒ¨ç½²æ•™ç¨‹"><a href="#å¯èƒ½æ˜¯æœ€å¥½çš„-ss-panel-éƒ¨ç½²æ•™ç¨‹" class="headerlink" title="å¯èƒ½æ˜¯æœ€å¥½çš„ ss-panel éƒ¨ç½²æ•™ç¨‹"></a><a href="https://blessing.studio/build-shadowsocks-sharing-site-with-ss-panel/" target="_blank" rel="noopener">å¯èƒ½æ˜¯æœ€å¥½çš„ ss-panel éƒ¨ç½²æ•™ç¨‹</a></h1><p>æœ¬æ–‡è½¬è½½äºï¼š<a href="https://blessing.studio/build-shadowsocks-sharing-site-with-ss-panel/" target="_blank" rel="noopener">https://blessing.studio/build-shadowsocks-sharing-site-with-ss-panel/</a></p>
<p>ä»Šå¤©æŠ˜è…¾äº†å¥½ä¹… ss-panelï¼ŒæœŸé—´é‡åˆ°äº†ä¸€äº›å¥‡å¥‡æ€ªæ€ªçš„é—®é¢˜ï¼Œä½†æ˜¯ç½‘ä¸Šéƒ½æ²¡æœ‰å¥½çš„è§£å†³æ–¹æ³•ã€‚ç½‘ä¸Šé‚£ä¹ˆå¤šæ•™ç¨‹æœ‰äº›æ˜¯å†™å¾—ç¬¼ç»Ÿï¼Œæœ‰äº›è¿˜æ˜¯çå¤åˆ¶çš„ã€‚ç”±æ­¤èŒç”Ÿäº†æƒ³è¦å†™ä¸€ç¯‡é…ç½® ss-panel å’Œ ss-manyuser çš„æ•™ç¨‹ï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åˆ°éœ€è¦çš„äººã€‚</p>
<p>æ³¨æ„ï¼Œæœ¬æ•™ç¨‹ <strong>ä¸æ˜¯</strong> å›¾æ–‡å¹¶èŒ‚çš„é¢å‘å°ç™½çš„æ•™ç¨‹ï¼Œçªå¸Œæœ›ä½ èƒ½å¤Ÿæœ‰è¶³å¤Ÿçš„ Linux æ“ä½œç»éªŒå†æ¥çœ‹è¿™ç¯‡æ•™ç¨‹ã€‚è‡³å°‘ä½ éœ€è¦ç†Ÿæ‚‰ ssh è¿æ¥ï¼Œç†Ÿæ‚‰ Web ç¯å¢ƒçš„é…ç½®ï¼Œæœ€å¥½å¯ä»¥çœ‹å¾—æ‡‚ä¸€äº›ä»£ç ã€‚</p>
<h2 id="ä¸€ã€å®‰è£…å¹¶é…ç½®-ss-panel"><a href="#ä¸€ã€å®‰è£…å¹¶é…ç½®-ss-panel" class="headerlink" title="ä¸€ã€å®‰è£…å¹¶é…ç½® ss-panel"></a>ä¸€ã€å®‰è£…å¹¶é…ç½® ss-panel</h2><p>æœ¬æ•™ç¨‹æ‰“ç®—å…ˆé…ç½®å¥½å‰ç«¯ï¼Œå½“ç„¶ä½ æƒ³è¦å…ˆé…ç½®åç«¯å¯ä»¥æ‹‰ä¸‹å»ã€‚</p>
<h3 id="0x01-ç¯å¢ƒè¦æ±‚"><a href="#0x01-ç¯å¢ƒè¦æ±‚" class="headerlink" title="0x01 ç¯å¢ƒè¦æ±‚"></a>0x01 ç¯å¢ƒè¦æ±‚</h3><p>ä½œä¸ºå‰ç«¯çš„ ss-panel æ˜¯ä½¿ç”¨ PHP ç¼–å†™çš„ç½‘é¡µåº”ç”¨ç¨‹åºï¼Œå®ƒå¯¹ä½ çš„ä¸»æœºè¿è¡Œç¯å¢ƒæœ‰ä¸€å®šçš„è¦æ±‚ã€‚</p>
<ul>
<li>PHP 5.6 æˆ–æ›´é«˜</li>
<li>MySQL 5.5 æˆ–æ›´é«˜</li>
<li>æ”¯æŒ URL é‡å†™çš„ Web æœåŠ¡å™¨ï¼ˆNginx / Apache å‡å¯ï¼‰</li>
</ul>
<p>æœ¬æ•™ç¨‹æ‰€ä½¿ç”¨çš„ç¯å¢ƒæ˜¯ NGINX + PHP 7 + MariaDB 10ã€‚å½“ç„¶å…¶ä»–ä¸»æµ LNMP/LAMP æ¶æ„éƒ½å¯ä»¥ï¼ˆä¸ªäººæ¨èä½¿ç”¨ <a href="https://oneinstack.com/" target="_blank" rel="noopener">OneinStack</a>ï¼‰ï¼Œç¡®ä¿ä½ çš„ç«™ç‚¹å¯ä»¥è®¿é—®åå°±ç»§ç»­å§ã€‚</p>
<p>ä»€ä¹ˆï¼Ÿä½ ä¸çŸ¥é“ä¸Šé¢è¯´çš„é‚£äº›ä¸œè¥¿æ˜¯ä»€ä¹ˆï¼Ÿé‚£ä½ ä¸ºä»€ä¹ˆä¸é—®é—®<a href="https://www.google.com/" target="_blank" rel="noopener">ç¥å¥‡æµ·èº</a>å‘¢ï¼Ÿ</p>
<hr>
<p><strong>æ³¨æ„</strong>ï¼Œæ¥ä¸‹æ¥çš„æ“ä½œå¤§éƒ¨åˆ†éƒ½æ˜¯åœ¨ã€ç›®æ ‡æœåŠ¡å™¨ã€‘çš„ shell ä¸­è¿›è¡Œçš„ã€‚ç»§ç»­é˜…è¯»ä¹‹å‰ï¼Œä½ éœ€è¦é€šè¿‡ SSH ç­‰å·¥å…·è¿æ¥è‡³ä½ çš„æœåŠ¡å™¨ï¼Œå®ƒä¸€èˆ¬é•¿è¿™æ ·ï¼š</p>
<p><a href="https://img.blessing.studio/images/2017/02/18/QQ20170218173516.png" target="_blank" rel="noopener"><img src="https://img.blessing.studio/images/2017/02/18/QQ20170218173516.png" alt="shell example"></a></p>
<p>å¦‚æœä½ ä¸æ™“å¾—è¿™æ˜¯ä»€ä¹ˆï¼Œç¥å¥‡æµ·èºâ€¦â€¦ä»¥ä¸‹ç•¥ã€‚</p>
<h3 id="0x02-ä¸‹è½½-ss-panel-æºç "><a href="#0x02-ä¸‹è½½-ss-panel-æºç " class="headerlink" title="0x02 ä¸‹è½½ ss-panel æºç "></a>0x02 ä¸‹è½½ ss-panel æºç </h3><p>ss-panel çš„ GitHub é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/orvice/ss-panel" target="_blank" rel="noopener">orvice/ss-panel</a></p>
<p>ä½¿ç”¨ <code>cd</code> è¿›å…¥ä½ ç«™ç‚¹çš„ web æ ¹ç›®å½•ï¼Œä» git ä¸Š clone æºç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># æœ€å‰é¢çš„ç¾å…ƒç¬¦å·æ˜¯å‘½ä»¤æç¤ºç¬¦ï¼Œåˆ«æŠŠè¿™ä¸ªç»™ä¸€èµ·è¾“è¿›å»äº†</span><br><span class="line">$ git clone https://github.com/orvice/ss-panel.git</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä¸‹è½½æºç å†ç”¨ SCP/FPS ä¼ åˆ°æœåŠ¡å™¨ä¸Šå»ã€‚</p>
<p>æ³¨æ„æºç ä¸‹è½½å®Œæˆåçš„ç›®å½•ç»“æ„ï¼Œ<strong>è¯·åŠ¡å¿…ä¿è¯</strong> <code>/public</code> ç›®å½•åœ¨ç«™ç‚¹çš„æ ¹ç›®å½•ä¸‹ã€‚ä½ å¯ä»¥ä½¿ç”¨ <code>$ mv ss-panel/{.,}* ./</code> å‘½ä»¤å°†å­ç›®å½•çš„å†…å®¹ç§»åŠ¨åˆ°å½“å‰ç›®å½•æ¥ã€‚æ­£ç¡®çš„ç›®å½•ç»“æ„åº”è¯¥ç±»ä¼¼äºè¿™æ ·ï¼š</p>
<p><a href="https://img.blessing.studio/images/2017/02/18/QQ20170218174949.png" target="_blank" rel="noopener"><img src="https://img.blessing.studio/images/2017/02/18/QQ20170218174949.png" alt="directory structure example"></a></p>
<h3 id="0x03-é…ç½®-ss-panel"><a href="#0x03-é…ç½®-ss-panel" class="headerlink" title="0x03 é…ç½® ss-panel"></a>0x03 é…ç½® ss-panel</h3><p>æ‰§è¡Œå®Œä¸Šé¢çš„æ­¥éª¤ä¹‹åï¼Œä½ å…´é«˜é‡‡çƒˆåœ°è®¿é—®äº†ä½ çš„ç«™ç‚¹ï¼Œå´å¾—åˆ°äº†æ— æƒ…çš„ 403 Forbidden â€”â€” ç«™ç‚¹æ ¹ç›®å½•ä¸‹ç«Ÿç„¶æ²¡æœ‰ index.phpï¼</p>
<p>å¥½å§å…¶å®æ²¡ä»€ä¹ˆå¥½å¥‡æ€ªçš„ï¼Œå¤§éƒ¨åˆ† MVC æ¡†æ¶éƒ½å°† <code>index.php</code> çš„å…¥å£æ–‡ä»¶æ”¾åˆ°å…¶ä»–å­ç›®å½•ä¸‹äº†ï¼Œè¿™æ ·åšæ˜¯ä¸ºäº†ä¿æŠ¤æ ¹ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶ç­‰å¯èƒ½ä¼šå¯¼è‡´ä¿¡æ¯æ³„éœ²çš„æ•æ„Ÿæ–‡ä»¶æ— æ³•è¢«è®¿é—®ã€‚</p>
<p>æ¥ä¸‹æ¥è¯·æŒ‰ç…§ <a href="https://sspanel.xyz/docs/intro/installation#%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£çš„è¯´æ˜</a> æ­£ç¡®é…ç½®ä½ çš„ Web æœåŠ¡å™¨ã€‚æ­£ç¡®é…ç½®åçš„ NGINX é…ç½®åº”è¯¥é•¿è¿™æ ·ï¼š</p>
<p><a href="https://img.blessing.studio/images/2017/02/18/QQ20170218180726.png" target="_blank" rel="noopener"><img src="https://img.blessing.studio/images/2017/02/18/QQ20170218180726.png" alt="nginx configuration sample"></a></p>
<p>ç¼–è¾‘å®Œåé‡è½½ä½ çš„ Web æœåŠ¡å™¨ï¼Œç„¶åè®¿é—®ä½ çš„ç«™ç‚¹â€¦â€¦äºæ˜¯ä½ å¾—åˆ°äº†ä¸€ä¸ª 500 Internal Server Errorï¼ˆå¦‚æœä½ æ²¡å¼€å¯ <code>display_errors</code> å¯èƒ½çœ‹ä¸åˆ°è¯¦ç»†æŠ¥é”™ï¼‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Warning: require(/home/wwwroot/ss.prinzeugen.net/vendor/autoload.php): failed to open stream: No such file or directory in /home/wwwroot/ss.prinzeugen.net/bootstrap.php on line 18</span><br><span class="line"></span><br><span class="line">Fatal error: require(): Failed opening required &apos;/home/wwwroot/ss.prinzeugen.net/vendor/autoload.php&apos; (include_path=&apos;.:/usr/local/php/lib/php&apos;) in /home/wwwroot/ss.prinzeugen.net/bootstrap.php on line 18</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯æˆ‘ä»¬è¿˜æœªå®‰è£… ss-panel æ‰€éœ€çš„ä¾èµ–åº“å¯¼è‡´çš„ã€‚é‚å®‰è£…ä¹‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ curl -sS https://getcomposer.org/installer | php</span><br><span class="line">$ php composer.phar install</span><br></pre></td></tr></table></figure>
<p><a href="https://img.blessing.studio/images/2017/02/18/QQ20170218181624.png" target="_blank" rel="noopener"><img src="https://img.blessing.studio/images/2017/02/18/QQ20170218181624.png" alt="installing dependencies with composer"></a></p>
<p>ç­‰å¾…å®ƒå®‰è£…å®Œæ¯•åæ¥ç€è¿›è¡Œé…ç½®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cp .env.example .env</span><br></pre></td></tr></table></figure>
<p>å°† <code>.env.example</code> å¤åˆ¶ä¸€ä»½é‡å‘½åä¸º <code>.env</code>ï¼Œè‡ªè¡Œä¿®æ”¹å…¶ä¸­çš„æ•°æ®åº“ç­‰ä¿¡æ¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># database æ•°æ®åº“é…ç½®</span><br><span class="line">db_driver = &apos;mysql&apos;</span><br><span class="line">db_host = &apos;localhost&apos;</span><br><span class="line">db_port = &apos;3306&apos;</span><br><span class="line">db_database = &apos;ss-panel&apos;</span><br><span class="line">db_username = &apos;ss-panel&apos;</span><br><span class="line">db_password = &apos;secret&apos;</span><br><span class="line">db_charset = &apos;utf8&apos;</span><br><span class="line">db_collation = &apos;utf8_general_ci&apos;</span><br><span class="line">db_prefix = &apos;&apos;</span><br></pre></td></tr></table></figure>
<p>æ•°æ®åº“çš„åˆ›å»ºæˆ‘å°±ä¸å¤šè¯´äº†ï¼Œå»ºç«™çš„ä¸€èˆ¬éƒ½ç©è¿‡æ•°æ®åº“å§ï¼Ÿå°†æ ¹ç›®å½•ä¸‹çš„ <code>db.sql</code> å¯¼å…¥åˆ°æ•°æ®åº“ä¸­å³å¯ã€‚å…¶ä»–é…ç½®è‡ªè¡Œä¿®æ”¹ã€‚</p>
<p><a href="https://img.blessing.studio/images/2017/02/18/QQ20170218183004.png" target="_blank" rel="noopener"><img src="https://img.blessing.studio/images/2017/02/18/QQ20170218183004.png" alt="importing tables"></a></p>
<p>ä½ è¿˜éœ€è¦ä¿®æ”¹ <code>.env</code> ä¸­çš„ <code>muKey</code> å­—æ®µï¼Œä¿®æ”¹ä¸ºä»»æ„å­—ç¬¦ä¸²ï¼ˆæœ€å¥½åªåŒ…å« ASCII å­—ç¬¦ï¼‰ï¼Œä¸‹é¢é…ç½®åç«¯çš„æ—¶å€™æˆ‘ä»¬éœ€è¦ä½¿ç”¨åˆ°è¿™ä¸ª <code>muKey</code>ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">muKey = &apos;api_key_just_for_test&apos;</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥ï¼Œç¡®ä¿ <code>storage</code> ç›®å½•å¯å†™å…¥ï¼ˆå¦åˆ™ Smarty ä¼šæŠ¥é”™ï¼‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ chown -R www storage</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨è®¿é—®ä½ çš„ç«™ç‚¹ï¼Œå°±å¯ä»¥çœ‹åˆ° ss-panel çš„é¦–é¡µå•¦ï¼š</p>
<p><a href="https://ooo.0o0.ooo/2017/02/18/58a82108b285e.png" target="_blank" rel="noopener"><img src="https://ooo.0o0.ooo/2017/02/18/58a82108b285e.png" alt="landing page"></a></p>
<h3 id="0x03-è¿›å…¥-ss-panel-åå°"><a href="#0x03-è¿›å…¥-ss-panel-åå°" class="headerlink" title="0x03 è¿›å…¥ ss-panel åå°"></a>0x03 è¿›å…¥ ss-panel åå°</h3><p>ç°åœ¨è®¿é—® <a href="http://your-domain/admin" target="_blank" rel="noopener">http://your-domain/admin</a> å°±å¯ä»¥è¿›å…¥ ss-panel åå°äº†ã€‚</p>
<p>ä¸è¿‡ç»†å¿ƒçš„ä½ å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œåˆšæ‰å¯¼å…¥æ•°æ®è¡¨çš„æ—¶å€™ï¼Œuser è¡¨å¹¶æ²¡æœ‰æ·»åŠ è®°å½•ï¼Œé‚£è¦å’‹è¿›ç®¡ç†åå°å‘¢ï¼Ÿå½“ç„¶ä½ å¯ä»¥åœ¨æ•°æ®åº“ä¸­æ‰‹åŠ¨åŠ ä¸€æ¡è®°å½•ï¼Œä¸è¿‡ä½œè€…å·²ç»æä¾›äº†ä¸€ä¸ªæ›´æ–¹ä¾¿çš„æ–¹å¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ php xcat createAdmin</span><br></pre></td></tr></table></figure>
<p>åœ¨ç«™ç‚¹æ ¹ç›®å½•ä¸‹è¿è¡Œï¼Œæ ¹æ®æç¤ºå³å¯åˆ›å»ºç®¡ç†å‘˜è´¦å· <del>ï¼ˆè¿™ä¸ªæ–‡å­—å¯¹é½çœŸé¸¡å„¿ shiï¼‰</del>ï¼š</p>
<p><a href="https://img.blessing.studio/images/2017/02/18/QQ20170218184049.png" target="_blank" rel="noopener"><img src="https://img.blessing.studio/images/2017/02/18/QQ20170218184049.png" alt="creating admin account"></a></p>
<p>ä½¿ç”¨åˆšæ‰å¡«å†™çš„é‚®ç®±å’Œå¯†ç è¿›å…¥åå°ï¼š</p>
<p><a href="https://ooo.0o0.ooo/2017/02/18/58a825580f6c3.png" target="_blank" rel="noopener"><img src="https://ooo.0o0.ooo/2017/02/18/58a825580f6c3.png" alt="ss-panel dashboard screenshot"></a></p>
<p>åˆ°è¿™é‡Œï¼Œä½œä¸ºå‰ç«¯çš„ ss-panel å°±å·²ç»é…ç½®å®Œæˆäº†ã€‚ä¸‹é¢å¼€å§‹éƒ¨ç½²ä½œä¸ºåç«¯çš„ <code>shadowsocks-manyuser</code>ã€‚</p>
<hr>
<h2 id="äºŒã€éƒ¨ç½²å¹¶é…ç½®-shadowsocks-manyuser"><a href="#äºŒã€éƒ¨ç½²å¹¶é…ç½®-shadowsocks-manyuser" class="headerlink" title="äºŒã€éƒ¨ç½²å¹¶é…ç½® shadowsocks-manyuser"></a>äºŒã€éƒ¨ç½²å¹¶é…ç½® shadowsocks-manyuser</h2><p>åœ¨æœ¬ç¯‡æ•™ç¨‹ä¸­æˆ‘ä»¬ä½¿ç”¨ <a href="https://github.com/fsgmhoward/shadowsocks-py-mu" target="_blank" rel="noopener">fsgmhoward/shadowsocks-py-mu</a> è¿™ä¸ªç‰ˆæœ¬çš„åç«¯ã€‚ä¸åŒäºè¿™ç¯‡æ•™ç¨‹åŸå…ˆæ¨èçš„ <a href="https://github.com/mengskysama/shadowsocks-rm/tree/manyuser" target="_blank" rel="noopener">@mengskysama</a> ç‰ˆæœ¬ï¼Œè¿™ä¸ªåç«¯æ”¯æŒä½¿ç”¨ MultiUser API ä¸å‰ç«¯çš„ ss-panel è¿›è¡Œç”¨æˆ·ä¿¡æ¯äº¤äº’ã€‚</p>
<p>è¿™ä¸ª API çš„å®˜æ–¹ä»‹ç»åœ¨<a href="https://sspanel.xyz/docs/muapi" target="_blank" rel="noopener">è¿™é‡Œ</a>ã€‚ç®€å•æ¥è®²ï¼Œå¦‚æœä½ é€šè¿‡ API æ¥ä¸å‰ç«¯é€šä¿¡ï¼Œä½ å°±ä¸éœ€è¦ä¿®æ”¹åç«¯çš„æ•°æ®åº“é…ç½®äº†ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨ã€Œè‡ªå®šä¹‰åŠ å¯†ã€ã€ã€Œæµé‡è®°å½•ã€ç­‰é«˜çº§åŠŸèƒ½ã€‚ä¸‹é¢æˆ‘<strong>åªä»‹ç»</strong>ä½¿ç”¨ API çš„æ–¹æ³•ï¼Œå¦å¤–é‚£ä¸ªæ¯”è¾ƒéº»çƒ¦çš„æ–¹æ³•å¯ä»¥åœ¨<a href="https://github.com/fsgmhoward/shadowsocks-py-mu#install-instruction-for-database-user" target="_blank" rel="noopener">è¿™é‡Œ</a>æŸ¥çœ‹ã€‚</p>
<h3 id="0x01-å®‰è£…-shadowsocks-manyuser"><a href="#0x01-å®‰è£…-shadowsocks-manyuser" class="headerlink" title="0x01 å®‰è£… shadowsocks-manyuser"></a>0x01 å®‰è£… shadowsocks-manyuser</h3><p>å…ˆå°†ä»£ç  clone åˆ°æœ¬åœ°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone https://github.com/fsgmhoward/shadowsocks-py-mu.git</span><br></pre></td></tr></table></figure>
<p>æºç  clone åï¼Œä½ çš„ç›®å½•ç»“æ„åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p>
<p><a href="https://img.blessing.studio/images/2017/02/18/QQ20170218200629.png" target="_blank" rel="noopener"><img src="https://img.blessing.studio/images/2017/02/18/QQ20170218200629.png" alt="directory structure ss mu"></a></p>
<p>å…¶ä¸­çš„ shadowsocks å­ç›®å½•æ‰æ˜¯æˆ‘ä»¬éœ€è¦çš„ï¼Œå¤–é¢çš„æ˜¯ <code>setup.py</code> çš„ç›¸å…³æ–‡ä»¶ã€‚</p>
<h3 id="0x02-é…ç½®-shadowsocks-manyuser"><a href="#0x02-é…ç½®-shadowsocks-manyuser" class="headerlink" title="0x02 é…ç½® shadowsocks-manyuser"></a>0x02 é…ç½® shadowsocks-manyuser</h3><p>è¿›å…¥ <code>shadowsocks</code> ç›®å½•ï¼Œå°† <code>config_example.py</code> å¤åˆ¶ä¸€ä»½åˆ° <code>config.py</code>ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cp config_example.py config.py</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹å…¶ä¸­ç¬¬ 15 è¡Œå’Œç¬¬ 29~31 è¡Œçš„å†…å®¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># å¯ç”¨ MultiUser API</span><br><span class="line">API_ENABLED = True</span><br><span class="line"></span><br><span class="line"># å°±æ˜¯åœ¨ä½ çš„ç«™ç‚¹åœ°å€åé¢åŠ ä¸ª /mu</span><br><span class="line">API_URL = &apos;http://ss.prinzeugen.net/mu&apos;</span><br><span class="line"># è¿˜è®°å¾—ä¸Šé¢åœ¨ .env ä¸­å¡«å†™çš„ muKey å—ï¼ŸæŠŠå®ƒå¡«åœ¨è¿™é‡Œ</span><br><span class="line">API_PASS = &apos;api_key_just_for_test&apos;</span><br></pre></td></tr></table></figure>
<p>ç”±äºæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨ Mu API æ¥ä¸å‰ç«¯é€šä¿¡ï¼Œæ‰€ä»¥æˆ‘ä»¬<strong>ä¸éœ€è¦</strong>ä¿®æ”¹ <code>config.py</code> ä¸­ä»»ä½•å…³äºæ•°æ®åº“çš„é…ç½®ã€‚</p>
<p>å¥½äº†ï¼Œç°åœ¨å¯ä»¥è¯•ç€è¿è¡Œä¸€ä¸‹ <code>$ python servers.py</code> äº†ï¼ˆæ³¨æ„ï¼Œæ˜¯ <strong>servers.py</strong> è€Œä¸æ˜¯ <strong>server.py</strong>ï¼‰ã€‚å¦‚æœæ²¡é”™çš„è¯ï¼Œåº”è¯¥å¯ä»¥çœ‹åˆ°è¿™æ ·çš„è¾“å‡ºï¼š</p>
<p><a href="https://img.blessing.studio/images/2017/02/18/QQ20170218203217.png" target="_blank" rel="noopener"><img src="https://img.blessing.studio/images/2017/02/18/QQ20170218203217.png" alt="running successfully"></a></p>
<p>å…¶ä¸­ <code>P[XXX]</code> è¡¨ç¤ºç”¨æˆ·ç«¯å£ï¼Œ<code>M[XXX]</code> è¡¨ç¤ºåŠ å¯†æ–¹å¼ï¼Œ<code>E[XXX]</code> è¡¨ç¤ºç”¨æˆ·çš„é‚®ç®±åœ°å€ã€‚è¿™äº›éƒ½ä¼šéšç€ ss-panel å‰ç«¯ä¸­ç”¨æˆ·é…ç½®çš„æ”¹å˜è€Œå®æ—¶å˜åŒ–ã€‚</p>
<h3 id="0x03-å¸¸è§é”™è¯¯-FAQ"><a href="#0x03-å¸¸è§é”™è¯¯-FAQ" class="headerlink" title="0x03 å¸¸è§é”™è¯¯ FAQ"></a>0x03 å¸¸è§é”™è¯¯ FAQ</h3><p>è¿æ¥ä¸Š shadowsocks è¯•è¯•çœ‹èƒ½ä¸èƒ½ç¿»å¢™äº†ï¼Ÿ<strong>å…«æˆä¸èƒ½</strong>ã€‚</p>
<p>è™½ç„¶ä½ æˆåŠŸçš„æŠŠ servers.py è·‘èµ·æ¥äº†ï¼Œä½†è¿˜å¯èƒ½æœ‰å„ç§ç¥å¥‡çš„é”™è¯¯é˜»æ­¢ä½ ç¿»å‡ºä¼Ÿå¤§çš„å¢™ã€‚</p>
<p>é¦–å…ˆå›½é™…æƒ¯ä¾‹æŸ¥çœ‹è¿æ¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ netstat -anp | grep ä½ çš„ç«¯å£</span><br></pre></td></tr></table></figure>
<p>æ­£å¸¸çš„è¯ï¼Œåº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Active Internet connections (servers and established)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name</span><br><span class="line">tcp        0      0 0.0.0.0:62111            0.0.0.0:*               LISTEN      32083/python</span><br><span class="line">tcp        0      0 162.233.122.111:62111    115.233.233.140:47177   TIME_WAIT   -            </span><br><span class="line">tcp        0      0 162.233.122.111:62111    115.233.233.140:47161   TIME_WAIT   -            </span><br><span class="line">tcp        0      0 162.233.122.111:62111    115.233.233.140:47160   TIME_WAIT   -            </span><br><span class="line">tcp        0      0 162.233.122.111:62111    115.233.233.140:47157   TIME_WAIT   -</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ²¡æœ‰æ¥è‡ªä½ çš„ IP çš„ TCP è¿æ¥çš„è¯ï¼Œé‚£å…«æˆå°±æ˜¯é˜²ç«å¢™çš„é”…äº†ï¼Œæ‰§è¡Œ iptables æ”¾è¡Œä½ çš„ç«¯å£ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ iptables -I INPUT -p tcp -m tcp --dport ä½ çš„ç«¯å£ -j ACCEPT</span><br><span class="line">$ iptables-save</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ss-panel æ–°æ³¨å†Œçš„ç”¨æˆ·æ‰€åˆ†é…çš„ç«¯å£å‡ä¸ºå…¶ id-1 çš„ç”¨æˆ·çš„ç«¯å£å· + 1ã€‚æ¯”å¦‚è¯´ä½ æŠŠ admin ç”¨æˆ·ï¼ˆuid ä¸º1ï¼‰çš„ç«¯å£æ”¹ä¸º 12450ï¼ˆss-panel ä¸­ä¸èƒ½æ”¹ï¼Œå»æ•°æ®åº“æ”¹ï¼‰ï¼Œé‚£ä¹ˆåé¢æ³¨å†Œçš„æ–°ç”¨æˆ·çš„ç«¯å£å°±ä¼šæ˜¯ 12451, 12452 è¿™æ ·é€’å¢çš„ã€‚</p>
</blockquote>
<p>æ‰€ä»¥å¦‚æœä½ è¦å¼€æ”¾æ³¨å†Œï¼Œå°±è¦è¿™æ ·é…ç½®ä½ çš„ iptablesï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># æ³¨æ„æ˜¯åŠè§’å†’å·ï¼Œæ„ä¸ºå…è®¸ 12450 åŠä»¥ä¸Šçš„ç«¯å£</span><br><span class="line"># ä¹Ÿå¯ä»¥æŒ‡å®š 12450:15550 è¿™æ ·çš„èŒƒå›´</span><br><span class="line">$ iptables -I INPUT -p tcp -m tcp --dport 12450: -j ACCEPT</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨å†è¿æ¥ shadowsocks å°±åº”è¯¥å¯ä»¥çœ‹åˆ° TCP è¿æ¥ä¿¡æ¯äº†ã€‚å¹¶ä¸”ä½ å¯ä»¥åœ¨ ss-mu åç«¯çš„è¾“å‡ºä¿¡æ¯ä¸­çœ‹åˆ°è¯¦ç»†çš„è¿æ¥æ—¥å¿—ï¼š</p>
<p><a href="https://ooo.0o0.ooo/2017/02/18/58a8420faee8c.png" target="_blank" rel="noopener"><img src="https://ooo.0o0.ooo/2017/02/18/58a8420faee8c.png" alt="connection log"></a></p>
<p>æ—¥å¿—æ ¼å¼çš„è¯¦ç»†ä»‹ç»åœ¨è¿™é‡Œï¼š<a href="https://github.com/fsgmhoward/shadowsocks-py-mu#explanation-of-the-log-output" target="_blank" rel="noopener">Explanation of the log output</a>ã€‚</p>
<h2 id="ä¸‰ã€é…ç½®-ss-manyuser-å®ˆæŠ¤è¿›ç¨‹ä»¥åŠå¤šèŠ‚ç‚¹é…ç½®"><a href="#ä¸‰ã€é…ç½®-ss-manyuser-å®ˆæŠ¤è¿›ç¨‹ä»¥åŠå¤šèŠ‚ç‚¹é…ç½®" class="headerlink" title="ä¸‰ã€é…ç½® ss-manyuser å®ˆæŠ¤è¿›ç¨‹ä»¥åŠå¤šèŠ‚ç‚¹é…ç½®"></a>ä¸‰ã€é…ç½® ss-manyuser å®ˆæŠ¤è¿›ç¨‹ä»¥åŠå¤šèŠ‚ç‚¹é…ç½®</h2><h3 id="0x01-ä½¿ç”¨-supervisor-ç›‘æ§-ss-manyuser-è¿è¡Œ"><a href="#0x01-ä½¿ç”¨-supervisor-ç›‘æ§-ss-manyuser-è¿è¡Œ" class="headerlink" title="0x01 ä½¿ç”¨ supervisor ç›‘æ§ ss-manyuser è¿è¡Œ"></a>0x01 ä½¿ç”¨ supervisor ç›‘æ§ ss-manyuser è¿è¡Œ</h3><p>å¦‚æœä½ åªæ˜¯æƒ³è®© ss-manyuser åœ¨åå°è¿è¡Œçš„è¯ï¼Œå¯ä»¥å‚è€ƒæˆ‘å†™çš„<a href="https://prinzeugen.net/linux-tips-how-to-run-program-on-the-background" target="_blank" rel="noopener">è¿™ç¯‡æ–‡ç« </a>ã€‚</p>
<p>å®‰è£… supervisor ï¼ˆç”¨çš„æ˜¯ä¸Šé¢å®‰è£…è¿‡çš„ pipï¼‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># å…ˆå®‰è£… pip åŒ…ç®¡ç†å™¨</span><br><span class="line">$ sudo apt-get install python-pip  # For Debian/Ubuntu</span><br><span class="line">$ sudo yum install python-pip      # For CentOS</span><br><span class="line"></span><br><span class="line">$ pip install supervisor</span><br></pre></td></tr></table></figure>
<p>åˆ›å»º supervisor é…ç½®æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># è¾“å‡ºè‡³ supervisor çš„é»˜è®¤é…ç½®è·¯å¾„</span><br><span class="line">$ echo_supervisord_conf &gt; /etc/supervisord.conf</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œ supervisor æœåŠ¡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ supervisord</span><br></pre></td></tr></table></figure>
<p>é…ç½® supervisor ä»¥ç›‘æ§ ss-manyuser è¿è¡Œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim /etc/supervisord.conf</span><br></pre></td></tr></table></figure>
<p>åœ¨æ–‡ä»¶å°¾éƒ¨ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥<a href="http://supervisord.org/configuration.html" target="_blank" rel="noopener">æ–°å»ºé…ç½®æ–‡ä»¶</a>ï¼Œä¸è¿‡è¿™æ ·æ¯”è¾ƒæ–¹ä¾¿ï¼‰æ·»åŠ å¦‚ä¸‹å†…å®¹å¹¶é…Œæƒ…ä¿®æ”¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[program:ss-manyuser]</span><br><span class="line">command = python /root/shadowsocks-py-mu/shadowsocks/servers.py</span><br><span class="line">user = root</span><br><span class="line">autostart = true</span><br><span class="line">autorestart = true</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ command é‡Œçš„ç›®å½•è¯·è‡ªè¡Œä¿®æ”¹ä¸ºä½ çš„ <code>servers.py</code> æ‰€åœ¨çš„ç»å¯¹è·¯å¾„ã€‚</p>
<p>é‡å¯ supervisor æœåŠ¡ä»¥åŠ è½½é…ç½®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ killall -HUP supervisord</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹ shadowsocks-manyuser æ˜¯å¦å·²ç»è¿è¡Œï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ps -ef | grep servers.py</span><br><span class="line">root       952   739  0 15:40 ?        00:00:00 python /root/shadowsocks-rm/shadowsocks/servers.py</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤ç®¡ç† shadowsock-manyuser çš„çŠ¶æ€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ supervisorctl &#123;start|stop|restart&#125; ss-manyuser</span><br></pre></td></tr></table></figure>
<h3 id="0x02-ss-panel-çš„å¤šèŠ‚ç‚¹é…ç½®"><a href="#0x02-ss-panel-çš„å¤šèŠ‚ç‚¹é…ç½®" class="headerlink" title="0x02 ss-panel çš„å¤šèŠ‚ç‚¹é…ç½®"></a>0x02 ss-panel çš„å¤šèŠ‚ç‚¹é…ç½®</h3><p>å…¶å®å¤šèŠ‚ç‚¹ä¹Ÿæ²¡å’‹ç„ä¹ï¼Œè¯´ç™½äº†å°±æ˜¯å¤šä¸ªåç«¯å…±ç”¨ä¸€ä¸ªå‰ç«¯è€Œå·²ã€‚è€Œä¸”æˆ‘ä»¬çš„åç«¯æ˜¯ä½¿ç”¨ Mu API æ¥ä¸å‰ç«¯è¿›è¡Œäº¤äº’çš„ï¼Œæ‰€ä»¥å¤šèŠ‚ç‚¹çš„é…ç½®å°±æ›´ç®€å•äº†ï¼šåªè¦æŠŠæ‰€æœ‰åç«¯çš„ <code>config.py</code> ä¸­çš„ <code>API_URL</code> å’Œ <code>API_PASS</code> éƒ½æ”¹æˆä¸€æ ·å³å¯ï¼ˆè®°å¾— <code>API_ENABLED = True</code>ï¼‰ã€‚</p>
<h2 id="å››ã€å†™åœ¨åé¢"><a href="#å››ã€å†™åœ¨åé¢" class="headerlink" title="å››ã€å†™åœ¨åé¢"></a>å››ã€å†™åœ¨åé¢</h2><p>å…¶ä»–å¯ç”¨çš„å‰ç«¯ï¼š</p>
<ul>
<li><a href="https://github.com/esdeathlove/ss-panel-v3-mod" target="_blank" rel="noopener">esdeathlove/ss-panel-v3-mod</a>ï¼Œä¿®æ”¹ç‰ˆçš„ ss-panelï¼Œä¿®æ”¹äº†è›®å¤šä¸œè¥¿çš„ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥å»çœ‹çœ‹ï¼Œä»–é‚£è¾¹å®‰è£…è¯´æ˜éƒ½å†™å¾—å¾ˆè¯¦ç»†äº†ï¼›</li>
<li><a href="https://github.com/sendya/shadowsocks-panel" target="_blank" rel="noopener">sendya/shadowsocks-panel</a>ï¼Œå¦å¤–ä¸€ä¸ªå…¨æ–°çš„ ss-manyuser å‰ç«¯ï¼Œæœ‰ç”¨æˆ·ç­‰çº§ã€å¥—é¤ã€æ”¯ä»˜ç­‰åŠŸèƒ½ï¼Œä¸æ”¯æŒä½¿ç”¨ Mu APIï¼Œéƒ¨ç½²æ•™ç¨‹åœ¨<a href="https://github.com/sendya/shadowsocks-panel/wiki/Shadowsocks-Panel-%E9%9D%A2%E6%9D%BF%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B" target="_blank" rel="noopener">è¿™é‡Œ</a>ã€‚</li>
</ul>
<p>å…¶ä»–å¯ç”¨çš„åç«¯ï¼š</p>
<ul>
<li><a href="https://github.com/catpie/ss-go-mu" target="_blank" rel="noopener">shadowsocks-go mu</a>ï¼ŒGo è¯­è¨€å®ç°ï¼Œæ€§èƒ½æ¯” Python ç‰ˆå¥½ï¼Œä¹Ÿæ”¯æŒ Mu APIï¼›</li>
<li><a href="https://github.com/shadowsocksr/shadowsocksr" target="_blank" rel="noopener">shadowsocksR manyuser</a> SSR ç‰ˆæœ¬ï¼Œè§ä»è§æ™ºã€‚</li>
</ul>
<p>è¿™å‡ ä¸ªåç«¯çš„éƒ¨ç½²æ–¹æ³•å¤§åŒå°å¼‚ï¼Œæˆ‘è¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ã€‚</p>
<h4 id="æ–‡ç« æ›´æ–°æ—¥å¿—"><a href="#æ–‡ç« æ›´æ–°æ—¥å¿—" class="headerlink" title="æ–‡ç« æ›´æ–°æ—¥å¿—"></a>æ–‡ç« æ›´æ–°æ—¥å¿—</h4><ul>
<li>2017-02-18</li>
<li>æ ¹æ®è¯„è®ºåŒºæ¨èå°†åç«¯ç”± <a href="https://github.com/mengskysama/shadowsocks-rm/tree/manyuser" target="_blank" rel="noopener">mengskysama/shadowsocks-rm/manyuser</a> åˆ‡æ¢è‡³ <a href="https://github.com/fsgmhoward/shadowsocks-py-mu" target="_blank" rel="noopener">fsgmhoward/shadowsocks-py-mu</a>ï¼›</li>
<li>æ‰€æœ‰åç«¯é…ç½®å‡æ”¹ç”¨ <a href="https://sspanel.xyz/docs/muapi/v2" target="_blank" rel="noopener">Mu API v2</a> çš„æ–¹æ³•ï¼›</li>
<li>ä½¿ç”¨äº†æ›´åŠ ä¸¥è°¨çš„æ–‡æ³•ã€‚</li>
</ul>
<hr>
<p><a href="https://img.blessing.studio/images/2017/02/18/QQ20170218213554.png" target="_blank" rel="noopener"><img src="https://img.blessing.studio/images/2017/02/18/QQ20170218213554.png" alt="success google"></a></p>
<p>è‡³æ­¤ï¼Œä½ å·²å®Œæˆå¯¹ ss-panel çš„éƒ¨ç½²ã€‚å«ä¸Šå°ä¼™ä¼´ä»¬ä¸€èµ·äº«å—è‡ªç”±çš„äº’è”ç½‘å§ ;)</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://zhanghongtong.github.io/2018/05/14/goè¯­è¨€è·å–æ–‡ä»¶åã€åç¼€/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="å¼ å¥‡æ€ª">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¼ å¥‡æ€ªçš„blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/14/goè¯­è¨€è·å–æ–‡ä»¶åã€åç¼€/" itemprop="url">goè¯­è¨€è·å–æ–‡ä»¶åã€åç¼€</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-14T15:35:07+08:00">
                2018-05-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/golang/" itemprop="url" rel="index">
                    <span itemprop="name">golang</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">//http://my.oschina.net/itfanr/blog/373983</span><br><span class="line">package main</span><br><span class="line"> </span><br><span class="line">import (</span><br><span class="line">    &quot;fmt&quot;</span><br><span class="line">    &quot;path&quot;</span><br><span class="line">    &quot;strings&quot;</span><br><span class="line">)</span><br><span class="line"> </span><br><span class="line">func main() &#123;</span><br><span class="line">    fullFilename := &quot;/Users/itfanr/Documents/test.txt&quot;</span><br><span class="line">    fmt.Println(&quot;fullFilename =&quot;, fullFilename)</span><br><span class="line">    var filenameWithSuffix string</span><br><span class="line">    filenameWithSuffix = path.Base(fullFilename) //è·å–æ–‡ä»¶åå¸¦åç¼€</span><br><span class="line">    fmt.Println(&quot;filenameWithSuffix =&quot;, filenameWithSuffix)</span><br><span class="line">    var fileSuffix string</span><br><span class="line">    fileSuffix = path.Ext(filenameWithSuffix) //è·å–æ–‡ä»¶åç¼€</span><br><span class="line">    fmt.Println(&quot;fileSuffix =&quot;, fileSuffix)</span><br><span class="line"> </span><br><span class="line">    var filenameOnly string</span><br><span class="line">    filenameOnly = strings.TrimSuffix(filenameWithSuffix, fileSuffix)//è·å–æ–‡ä»¶å</span><br><span class="line">    fmt.Println(&quot;filenameOnly =&quot;, filenameOnly)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://zhanghongtong.github.io/2018/05/14/GOLANGéšæœºæ•°ç”Ÿæˆæ–¹æ³•/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="å¼ å¥‡æ€ª">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¼ å¥‡æ€ªçš„blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/14/GOLANGéšæœºæ•°ç”Ÿæˆæ–¹æ³•/" itemprop="url">GOLANGéšæœºæ•°ç”Ÿæˆæ–¹æ³•</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-14T15:31:24+08:00">
                2018-05-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/golang/" itemprop="url" rel="index">
                    <span itemprop="name">golang</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ä½¿ç”¨randåŒ…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line">import (</span><br><span class="line">    &quot;fmt&quot;</span><br><span class="line">    &quot;math/rand&quot;</span><br><span class="line">)</span><br><span class="line">func main() &#123;</span><br><span class="line">    for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">        fmt.Println(rand.Intn(100)) //è¿”å›[0,100)çš„éšæœºæ•´æ•°</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ä½¿ç”¨æ˜¯å¯ä»¥äº§ç”Ÿéšæœºæ•°ï¼Œä½†æ˜¯ç¨‹åºé‡å¯åï¼Œäº§ç”Ÿçš„éšæœºæ•°å’Œä¸Šæ¬¡ä¸€æ ·ã€‚æ˜¯å› ä¸ºç¨‹åºä½¿ç”¨äº†ç›¸åŒçš„ç§å­ 1ã€‚å¯ä»¥ä½¿ç”¨rand.Seed(seed)æ¥è®¾ç½®ä¸€ä¸ªä¸åŒçš„ç§å­å€¼ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line">import (</span><br><span class="line">    &quot;fmt&quot;</span><br><span class="line">    &quot;math/rand&quot;</span><br><span class="line">    &quot;time&quot;</span><br><span class="line">)</span><br><span class="line">func main() &#123;</span><br><span class="line">    rand.Seed(time.Now().UnixNano()) //åˆ©ç”¨å½“å‰æ—¶é—´çš„UNIXæ—¶é—´æˆ³åˆå§‹åŒ–randåŒ…</span><br><span class="line">    for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">        x := rand.Intn(100)</span><br><span class="line">        fmt.Println(x)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>äº§ç”ŸæŒ‡å®šæ•°å­—èŒƒå›´å†…çš„éšæœºæ•°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line">import (</span><br><span class="line">    &quot;fmt&quot;</span><br><span class="line">    &quot;math/rand&quot;</span><br><span class="line">    &quot;time&quot;</span><br><span class="line">)</span><br><span class="line">func main() &#123;</span><br><span class="line">    for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">        x := randInt(100ï¼Œ999)</span><br><span class="line">        fmt.Println(x)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func randInt(min int , max int) int &#123;</span><br><span class="line">	rand.Seed(time.Now().UnixNano())</span><br><span class="line">	return min + rand.Intn(max-min)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://zhanghongtong.github.io/2018/05/14/Golangï¼šä½¿ç”¨HTMLæ¨¡æ¿å‘é€é‚®ä»¶/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="å¼ å¥‡æ€ª">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¼ å¥‡æ€ªçš„blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/14/Golangï¼šä½¿ç”¨HTMLæ¨¡æ¿å‘é€é‚®ä»¶/" itemprop="url">Golangï¼šä½¿ç”¨HTMLæ¨¡æ¿å‘é€é‚®ä»¶</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-14T15:28:48+08:00">
                2018-05-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/golang/" itemprop="url" rel="index">
                    <span itemprop="name">golang</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>åˆ›å»ºHTMLæ¨¡æ¿</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</span><br><span class="line">&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;</span><br><span class="line">ã€€&lt;head&gt;</span><br><span class="line">    ã€€ã€€&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;</span><br><span class="line">    ã€€ã€€&lt;title&gt;&#123;&#123;.SUBJECT&#125;&#125;&#125;&lt;/title&gt;</span><br><span class="line">    ã€€ã€€&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;/&gt;</span><br><span class="line">    ã€€&lt;/head&gt;</span><br><span class="line">    &lt;body style=&quot;margin: 0; padding: 0;&quot;&gt;</span><br><span class="line">    	&lt;img style=&apos;float:left;margin-bottom:20px&apos; src=&apos;https://initiranking-system.oss-cn-hangzhou.aliyuncs.com/logo.png&apos;&gt;</span><br><span class="line">       &lt;table style=&apos;&apos; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%&quot;&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">             &lt;td style=&apos;font-size:18px&apos;&gt; Hi, &#123;&#123;.TO&#125;&#125;&#125;&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">              &lt;tr&gt;</span><br><span class="line">                  &lt;td style=&apos;color:#ccc&apos;&gt; your code is &#123;&#123;.CODE&#125;&#125;&lt;/td&gt;</span><br><span class="line">              &lt;/tr&gt;</span><br><span class="line">        &lt;/table&gt;</span><br><span class="line">      &lt;div style=&apos;margin-top:20px&apos;&gt;</span><br><span class="line">          &lt;div style=&apos;display: inline-block;</span><br><span class="line">                              width: 30px;</span><br><span class="line">                              height: 5px;</span><br><span class="line">                              border-top:1px #000 solid&apos;&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;p style=&apos;display: inline-block;&apos;&gt;</span><br><span class="line">              Nodress www.noderess.com</span><br><span class="line">          &lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>è¯»å–æ¨¡æ¿å¹¶å¯¼å…¥æ•°æ®</p>
<p>é¦–å…ˆé€šè¿‡è§£æ html æ¥åˆ›å»ºä¸€ä¸ªæ¨¡æ¿ï¼Œç„¶åæŠŠå®ƒå­˜å‚¨åœ¨ä¸€ä¸ªå˜é‡ t ä¸­ï¼ˆç¨åå†ç”¨ï¼‰ã€‚ç„¶åå£°æ˜ä¸€ä¸ª bytes.Buffer ç”¨äºä¿å­˜ email çš„ ä¸»é¢˜ã€header å’Œæ­£æ–‡ï¼ˆè‡ªå®šä¹‰ htmlï¼‰ã€‚æˆ‘å‘ç°ä½¿ç”¨ bytes.Buffer ç±»å‹æ¯”åœ¨å…¶ä»–åœ¨çº¿è§£å†³æ–¹æ¡ˆä¸­ä½¿ç”¨çš„å…¶ä»–ç±»å‹æ›´åŠ çµæ´»ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">func SendVerCode() error &#123;</span><br><span class="line">	subject := &quot;Nodress Verification Code&quot;	//é‚®ä»¶ä¸»é¢˜</span><br><span class="line">	to := &quot;test@qq.com&quot;	//å‘é€ç›®æ ‡</span><br><span class="line">	</span><br><span class="line">	//ç”±æœåŠ¡å•†æä¾›</span><br><span class="line">	host := &quot;smtpdm.aliyun.com:25&quot;</span><br><span class="line">	user := &quot;service@sendemail.nodress67.com&quot;</span><br><span class="line">	password := &quot;NoDress6767&quot;</span><br><span class="line"></span><br><span class="line">	//è‡ªå·±é‡å†™çš„çš„stmpçš„ç™»å½•ï¼Œè¯¦è§ã€ŠGoè¯­è¨€ä½¿ç”¨SMTPçš„å‘é€é‚®ä»¶æŠ¥é”™unencrypted connectionçš„è§£å†³æ–¹æ¡ˆã€‹</span><br><span class="line">	auth := LoginAuth(user, password)	</span><br><span class="line"></span><br><span class="line">	//è¯»å–HTML</span><br><span class="line">	t, err := template.ParseFiles(&quot;view/emailTemplate/verificationCode.html&quot;)</span><br><span class="line">	if err != nil&#123;</span><br><span class="line">		return err</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	//å£°æ˜ä¸€ä¸ª bytes.Buffer ç”¨äºä¿å­˜ email çš„ ä¸»é¢˜ã€header å’Œæ­£æ–‡ï¼ˆè‡ªå®šä¹‰ htmlï¼‰</span><br><span class="line">	var b bytes.Buffer</span><br><span class="line">	headers := &quot;Content-Type: text/html; charset=UTF-8&quot;</span><br><span class="line">	b.Write([]byte(&quot;To: &quot; + to + &quot;\r\nFrom: &quot; + user + &quot;\r\nSubject: &quot; + subject + &quot;\r\n&quot; + headers + &quot;\r\n\r\n&quot;))</span><br><span class="line"></span><br><span class="line">	t.Execute(&amp;b, struct &#123;</span><br><span class="line">		SUBJECT string</span><br><span class="line">		TO string</span><br><span class="line">		CODE string</span><br><span class="line">	&#125;&#123;</span><br><span class="line">		SUBJECT:subject,</span><br><span class="line">		TO:to,</span><br><span class="line">		CODE:code,</span><br><span class="line">	&#125;)</span><br><span class="line">	send_to := strings.Split(to, &quot;;&quot;)</span><br><span class="line">	</span><br><span class="line">	//å‘é€é‚®ä»¶</span><br><span class="line">	err = smtp.SendMail(host, auth, user, send_to, b.Bytes())</span><br><span class="line">	if err != nil &#123;</span><br><span class="line">		return err</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	return nil</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://zhanghongtong.github.io/2018/05/14/Goè¯­è¨€ä½¿ç”¨SMTPçš„å‘é€é‚®ä»¶æŠ¥é”™unencrypted connectionçš„è§£å†³æ–¹æ¡ˆ/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="å¼ å¥‡æ€ª">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¼ å¥‡æ€ªçš„blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/14/Goè¯­è¨€ä½¿ç”¨SMTPçš„å‘é€é‚®ä»¶æŠ¥é”™unencrypted connectionçš„è§£å†³æ–¹æ¡ˆ/" itemprop="url">Goè¯­è¨€ä½¿ç”¨SMTPçš„å‘é€é‚®ä»¶æŠ¥é”™unencrypted connectionçš„è§£å†³æ–¹æ¡ˆ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-14T15:24:25+08:00">
                2018-05-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/golang/" itemprop="url" rel="index">
                    <span itemprop="name">golang</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>è½¬è‡ªï¼š<a href="http://www.kuqin.com/shuoit/20140303/338368.html" target="_blank" rel="noopener">http://www.kuqin.com/shuoit/20140303/338368.html</a></p>
<p>å±±å¡ç½‘éœ€è¦èƒ½å¤Ÿæ¯å‘¨ç»™æ³¨å†Œç”¨æˆ·å‘é€ä¸€å°åä¸ºâ€œæœ¬å‘¨æœ€çƒ­ä¹¦ç±â€çš„é‚®ä»¶ï¼Œè€Œä¹‹å‰ä¸€ç›´ä½¿ç”¨çš„è…¾è®¯ä¼ä¸šé‚®ç®±ç½¢å·¥äº†ï¼Œæç¤ºè¯´å‘é€è¯·æ±‚å¤ªå¤šå¤ªå¯†é›†ã€‚</p>
<p>ä¸€ç•ªå¯»æ‰¾ä¹‹åå‘ç°äº†å¤§å®¶å£ç¢‘ä¸é”™çš„æœç‹SendCloudæœåŠ¡ï¼Œçœ‹äº†çœ‹æ–‡æ¡£ï¼Œä»·æ ¼å®æƒ ç”¨èµ·æ¥ä¹Ÿæ–¹ä¾¿ï¼Œäºæ˜¯å‡†å¤‡ä½¿ç”¨å®ƒåšé‚®ä»¶å‘é€æœåŠ¡å™¨ã€‚æŒ‰ç…§æ–‡æ¡£çš„é…ç½®ä¸€æ­¥æ­¥èµ°ä¸‹æ¥å‘ç°åœ¨å‘é€é‚®ä»¶çš„æ—¶å€™ç«Ÿç„¶å‡ºé”™äº†ï¼Œé”™è¯¯æç¤ºæ˜¯â€œunencrypted connectionâ€ï¼Œå¥‡æ€ªäº†ã€‚</p>
<p>ç”±äºç”¨çš„æ˜¯smtpåŒ…çš„PLAINè®¤è¯æ–¹å¼ï¼Œæ‰€ä»¥æ‰“å¼€æºä»£ç çœ‹äº†çœ‹ï¼ˆSublimeText3+GoSublimeé‡Œctrl+. ctrl+aè¾“å…¥åŒ…åå’Œç»“æ„åç›´æ¥æŸ¥çœ‹æºä»£ç ï¼Œè°ç”¨è°å–œæ¬¢ï¼‰ï¼Œå‘ç°è¿™é‡Œè¦æ±‚ä½¿ç”¨åŠ å¯†è¿æ¥ï¼Œå¦åˆ™å°±ä¼šå‡ºä¸Šè¿°é”™è¯¯ã€‚æ©ï¼Œä¹Ÿèƒ½ç†è§£ï¼Œæ¯•ç«Ÿè¿™é‡Œæ˜æ–‡å‘é€å¯†ç äº†ã€‚å…³é”®ä»£ç å¦‚ä¸‹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">auth := smtp.PlainAuth(&quot;&quot;, Config.Username, Config.Password, Config.Host)</span><br><span class="line">smtp.SendMail(addr, auth, from, to, []byte(self.String()))</span><br></pre></td></tr></table></figure>
<p>é—®é¢˜æ˜ç™½ä¹‹åæ€è·¯ä¹Ÿå‡ºæ¥äº†ï¼Œè‡ªå·±å†™ä¸€ä¸ªä¸éœ€è¦åŠ å¯†é“¾æ¥çš„PLAINè®¤è¯å°±å¥½äº†ã€‚ç›´æ¥æŠŠæ ‡å‡†åº“ä¸­PLAINçš„å®ç°æ‹¿è¿‡æ¥ï¼Œåˆ é™¤å…¶ä¸­éœ€è¦åŠ å¯†å‡½æ•°çš„éƒ¨åˆ†ï¼Œç…§ç€å†™äº†ä¸€ä¸ªLoginAuthã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">package sendMail</span><br><span class="line"></span><br><span class="line">import &quot;net/smtp&quot;</span><br><span class="line"></span><br><span class="line">type loginAuth struct &#123;</span><br><span class="line">	username, password string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func LoginAuth(username, password string) smtp.Auth &#123;</span><br><span class="line">	return &amp;loginAuth&#123;username, password&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (a *loginAuth) Start(server *smtp.ServerInfo) (string, []byte, error) &#123;</span><br><span class="line">	return &quot;LOGIN&quot;, []byte(a.username), nil</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (a *loginAuth) Next(fromServer []byte, more bool) ([]byte, error) &#123;</span><br><span class="line">	if more &#123;</span><br><span class="line">		switch string(fromServer) &#123;</span><br><span class="line">		case &quot;Username:&quot;:</span><br><span class="line">			return []byte(a.username), nil</span><br><span class="line">		case &quot;Password:&quot;:</span><br><span class="line">			return []byte(a.password), nil</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	return nil, nil</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æŠŠå‘é€é‚®ä»¶çš„ä»£ç æ”¹æˆä¸‹é¢è¿™æ ·ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">auth := LoginAuth(user, password)</span><br><span class="line">smtp.SendMail(addr, auth, from, to, []byte(self.String()))</span><br></pre></td></tr></table></figure>
<p>æå®š</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://zhanghongtong.github.io/2018/05/14/go-iniä¸­æ–‡æ‰‹å†Œ/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="å¼ å¥‡æ€ª">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¼ å¥‡æ€ªçš„blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/14/go-iniä¸­æ–‡æ‰‹å†Œ/" itemprop="url">go-iniæ‰‹å†Œ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-14T14:55:12+08:00">
                2018-05-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/golang/" itemprop="url" rel="index">
                    <span itemprop="name">golang</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æœ¬åŒ…æä¾›äº† Go è¯­è¨€ä¸­è¯»å†™ INI æ–‡ä»¶çš„åŠŸèƒ½ã€‚</p>
<h2 id="åŠŸèƒ½ç‰¹æ€§"><a href="#åŠŸèƒ½ç‰¹æ€§" class="headerlink" title="åŠŸèƒ½ç‰¹æ€§"></a>åŠŸèƒ½ç‰¹æ€§</h2><ul>
<li>æ”¯æŒè¦†ç›–åŠ è½½å¤šä¸ªæ•°æ®æºï¼ˆ<code>[]byte</code>ã€æ–‡ä»¶å’Œ <code>io.ReadCloser</code>ï¼‰</li>
<li>æ”¯æŒé€’å½’è¯»å–é”®å€¼</li>
<li>æ”¯æŒè¯»å–çˆ¶å­åˆ†åŒº</li>
<li>æ”¯æŒè¯»å–è‡ªå¢é”®å</li>
<li>æ”¯æŒè¯»å–å¤šè¡Œçš„é”®å€¼</li>
<li>æ”¯æŒå¤§é‡è¾…åŠ©æ–¹æ³•</li>
<li>æ”¯æŒåœ¨è¯»å–æ—¶ç›´æ¥è½¬æ¢ä¸º Go è¯­è¨€ç±»å‹</li>
<li>æ”¯æŒè¯»å–å’Œ <strong>å†™å…¥</strong> åˆ†åŒºå’Œé”®çš„æ³¨é‡Š</li>
<li>è½»æ¾æ“ä½œåˆ†åŒºã€é”®å€¼å’Œæ³¨é‡Š</li>
<li>åœ¨ä¿å­˜æ–‡ä»¶æ—¶åˆ†åŒºå’Œé”®å€¼ä¼šä¿æŒåŸæœ‰çš„é¡ºåº</li>
</ul>
<h2 id="ä¸‹è½½å®‰è£…"><a href="#ä¸‹è½½å®‰è£…" class="headerlink" title="ä¸‹è½½å®‰è£…"></a>ä¸‹è½½å®‰è£…</h2><p>ä½¿ç”¨ä¸€ä¸ªç‰¹å®šç‰ˆæœ¬ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go get gopkg.in/ini.v1</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨æœ€æ–°ç‰ˆï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go get github.com/go-ini/ini</span><br></pre></td></tr></table></figure>
<p>å¦‚éœ€æ›´æ–°è¯·æ·»åŠ  <code>-u</code> é€‰é¡¹ã€‚</p>
<h3 id="æµ‹è¯•å®‰è£…"><a href="#æµ‹è¯•å®‰è£…" class="headerlink" title="æµ‹è¯•å®‰è£…"></a>æµ‹è¯•å®‰è£…</h3><p>å¦‚æœæ‚¨æƒ³è¦åœ¨è‡ªå·±çš„æœºå™¨ä¸Šè¿è¡Œæµ‹è¯•ï¼Œè¯·ä½¿ç”¨ <code>-t</code> æ ‡è®°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go get -t gopkg.in/ini.v1</span><br></pre></td></tr></table></figure>
<p>å¦‚éœ€æ›´æ–°è¯·æ·»åŠ  <code>-u</code> é€‰é¡¹ã€‚</p>
<h2 id="å¼€å§‹ä½¿ç”¨"><a href="#å¼€å§‹ä½¿ç”¨" class="headerlink" title="å¼€å§‹ä½¿ç”¨"></a>å¼€å§‹ä½¿ç”¨</h2><h3 id="ä»æ•°æ®æºåŠ è½½"><a href="#ä»æ•°æ®æºåŠ è½½" class="headerlink" title="ä»æ•°æ®æºåŠ è½½"></a>ä»æ•°æ®æºåŠ è½½</h3><p>ä¸€ä¸ª <strong>æ•°æ®æº</strong> å¯ä»¥æ˜¯ <code>[]byte</code> ç±»å‹çš„åŸå§‹æ•°æ®ï¼Œ<code>string</code> ç±»å‹çš„æ–‡ä»¶è·¯å¾„æˆ– <code>io.ReadCloser</code>ã€‚æ‚¨å¯ä»¥åŠ è½½ <strong>ä»»æ„å¤šä¸ª</strong> æ•°æ®æºã€‚å¦‚æœæ‚¨ä¼ é€’å…¶å®ƒç±»å‹çš„æ•°æ®æºï¼Œåˆ™ä¼šç›´æ¥è¿”å›é”™è¯¯ã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cfg, err := ini.Load([]<span class="keyword">byte</span>(<span class="string">"raw data"</span>), <span class="string">"filename"</span>, ioutil.NopCloser(bytes.NewReader([]<span class="keyword">byte</span>(<span class="string">"some other data"</span>))))</span><br></pre></td></tr></table></figure>
<p>æˆ–è€…ä»ä¸€ä¸ªç©ºç™½çš„æ–‡ä»¶å¼€å§‹ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cfg := ini.Empty()</span><br></pre></td></tr></table></figure>
<p>å½“æ‚¨åœ¨ä¸€å¼€å§‹æ— æ³•å†³å®šéœ€è¦åŠ è½½å“ªäº›æ•°æ®æºæ—¶ï¼Œä»å¯ä»¥ä½¿ç”¨ <strong>Append()</strong> åœ¨éœ€è¦çš„æ—¶å€™åŠ è½½å®ƒä»¬ã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">err := cfg.Append(<span class="string">"other file"</span>, []<span class="keyword">byte</span>(<span class="string">"other raw data"</span>))</span><br></pre></td></tr></table></figure>
<p>å½“æ‚¨æƒ³è¦åŠ è½½ä¸€ç³»åˆ—æ–‡ä»¶ï¼Œä½†æ˜¯ä¸èƒ½å¤Ÿç¡®å®šå…¶ä¸­å“ªäº›æ–‡ä»¶æ˜¯ä¸å­˜åœ¨çš„ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨å‡½æ•° <code>LooseLoad</code> æ¥å¿½ç•¥å®ƒä»¬ï¼ˆ<code>Load</code> ä¼šå› ä¸ºæ–‡ä»¶ä¸å­˜åœ¨è€Œè¿”å›é”™è¯¯ï¼‰ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cfg, err := ini.LooseLoad(<span class="string">"filename"</span>, <span class="string">"filename_404"</span>)</span><br></pre></td></tr></table></figure>
<p>æ›´ç‰›é€¼çš„æ˜¯ï¼Œå½“é‚£äº›ä¹‹å‰ä¸å­˜åœ¨çš„æ–‡ä»¶åœ¨é‡æ–°è°ƒç”¨ <code>Reload</code> æ–¹æ³•çš„æ—¶å€™çªç„¶å‡ºç°äº†ï¼Œé‚£ä¹ˆå®ƒä»¬ä¼šè¢«æ­£å¸¸åŠ è½½ã€‚</p>
<h4 id="å¿½ç•¥é”®åçš„å¤§å°å†™"><a href="#å¿½ç•¥é”®åçš„å¤§å°å†™" class="headerlink" title="å¿½ç•¥é”®åçš„å¤§å°å†™"></a>å¿½ç•¥é”®åçš„å¤§å°å†™</h4><p>æœ‰æ—¶å€™åˆ†åŒºå’Œé”®çš„åç§°å¤§å°å†™æ··åˆéå¸¸çƒ¦äººï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥é€šè¿‡ <code>InsensitiveLoad</code> å°†æ‰€æœ‰åˆ†åŒºå’Œé”®ååœ¨è¯»å–é‡Œå¼ºåˆ¶è½¬æ¢ä¸ºå°å†™ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cfg, err := ini.InsensitiveLoad(<span class="string">"filename"</span>)</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// sec1 å’Œ sec2 æŒ‡å‘åŒä¸€ä¸ªåˆ†åŒºå¯¹è±¡</span></span><br><span class="line">sec1, err := cfg.GetSection(<span class="string">"Section"</span>)</span><br><span class="line">sec2, err := cfg.GetSection(<span class="string">"SecTIOn"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// key1 å’Œ key2 æŒ‡å‘åŒä¸€ä¸ªé”®å¯¹è±¡</span></span><br><span class="line">key1, err := sec1.GetKey(<span class="string">"Key"</span>)</span><br><span class="line">key2, err := sec2.GetKey(<span class="string">"KeY"</span>)</span><br></pre></td></tr></table></figure>
<h4 id="ç±»ä¼¼-MySQL-é…ç½®ä¸­çš„å¸ƒå°”å€¼é”®"><a href="#ç±»ä¼¼-MySQL-é…ç½®ä¸­çš„å¸ƒå°”å€¼é”®" class="headerlink" title="ç±»ä¼¼ MySQL é…ç½®ä¸­çš„å¸ƒå°”å€¼é”®"></a>ç±»ä¼¼ MySQL é…ç½®ä¸­çš„å¸ƒå°”å€¼é”®</h4><p>MySQL çš„é…ç½®æ–‡ä»¶ä¸­ä¼šå‡ºç°æ²¡æœ‰å…·ä½“å€¼çš„å¸ƒå°”ç±»å‹çš„é”®ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[mysqld]</span></span><br><span class="line">...</span><br><span class="line">skip-host-cache</span><br><span class="line">skip-name-resolve</span><br></pre></td></tr></table></figure>
<p>é»˜è®¤æƒ…å†µä¸‹è¿™è¢«è®¤ä¸ºæ˜¯ç¼ºå¤±å€¼è€Œæ— æ³•å®Œæˆè§£æï¼Œä½†å¯ä»¥é€šè¿‡é«˜çº§çš„åŠ è½½é€‰é¡¹å¯¹å®ƒä»¬è¿›è¡Œå¤„ç†ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cfg, err := ini.LoadSources(ini.LoadOptions&#123;AllowBooleanKeys: <span class="literal">true</span>&#125;, <span class="string">"my.cnf"</span>))</span><br></pre></td></tr></table></figure>
<p>è¿™äº›é”®çš„å€¼æ°¸è¿œä¸º <code>true</code>ï¼Œä¸”åœ¨ä¿å­˜åˆ°æ–‡ä»¶æ—¶ä¹Ÿåªä¼šè¾“å‡ºé”®åã€‚</p>
<p>å¦‚æœæ‚¨æƒ³è¦é€šè¿‡ç¨‹åºæ¥ç”Ÿæˆæ­¤ç±»é”®ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ <code>NewBooleanKey</code>ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">key, err := sec.NewBooleanKey(<span class="string">"skip-host-cache"</span>)</span><br></pre></td></tr></table></figure>
<h4 id="å…³äºæ³¨é‡Š"><a href="#å…³äºæ³¨é‡Š" class="headerlink" title="å…³äºæ³¨é‡Š"></a>å…³äºæ³¨é‡Š</h4><p>ä¸‹è¿°å‡ ç§æƒ…å†µçš„å†…å®¹å°†è¢«è§†ä¸ºæ³¨é‡Šï¼š</p>
<ol>
<li>æ‰€æœ‰ä»¥ <code>#</code> æˆ– <code>;</code> å¼€å¤´çš„è¡Œ</li>
<li>æ‰€æœ‰åœ¨ <code>#</code> æˆ– <code>;</code> ä¹‹åçš„å†…å®¹</li>
<li>åˆ†åŒºæ ‡ç­¾åçš„æ–‡å­— (å³ <code>[åˆ†åŒºå]</code> ä¹‹åçš„å†…å®¹)</li>
</ol>
<p>å¦‚æœä½ å¸Œæœ›ä½¿ç”¨åŒ…å« <code>#</code> æˆ– <code>;</code> çš„å€¼ï¼Œè¯·ä½¿ç”¨ <figure class="highlight plain"><figcaption><span>``` æˆ– ``` """ ``` è¿›è¡ŒåŒ…è¦†ã€‚</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">é™¤æ­¤ä¹‹å¤–ï¼Œæ‚¨è¿˜å¯ä»¥é€šè¿‡ `LoadOptions` å®Œå…¨å¿½ç•¥è¡Œå†…æ³¨é‡Šï¼š</span><br><span class="line"></span><br><span class="line">```go</span><br><span class="line">cfg, err := ini.LoadSources(ini.LoadOptions&#123;IgnoreInlineComment: true&#125;, &quot;app.ini&quot;))</span><br></pre></td></tr></table></figure></p>
<h3 id="æ“ä½œåˆ†åŒºï¼ˆSectionï¼‰"><a href="#æ“ä½œåˆ†åŒºï¼ˆSectionï¼‰" class="headerlink" title="æ“ä½œåˆ†åŒºï¼ˆSectionï¼‰"></a>æ“ä½œåˆ†åŒºï¼ˆSectionï¼‰</h3><p>è·å–æŒ‡å®šåˆ†åŒºï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">section, err := cfg.GetSection(<span class="string">"section name"</span>)</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ‚¨æƒ³è¦è·å–é»˜è®¤åˆ†åŒºï¼Œåˆ™å¯ä»¥ç”¨ç©ºå­—ç¬¦ä¸²ä»£æ›¿åˆ†åŒºåï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">section, err := cfg.GetSection(<span class="string">""</span>)</span><br></pre></td></tr></table></figure>
<p>å½“æ‚¨éå¸¸ç¡®å®šæŸä¸ªåˆ†åŒºæ˜¯å­˜åœ¨çš„ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ç®€ä¾¿æ–¹æ³•ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">section := cfg.Section(<span class="string">"section name"</span>)</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä¸å°å¿ƒåˆ¤æ–­é”™äº†ï¼Œè¦è·å–çš„åˆ†åŒºå…¶å®æ˜¯ä¸å­˜åœ¨çš„ï¼Œé‚£ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿæ²¡äº‹çš„ï¼Œå®ƒä¼šè‡ªåŠ¨åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªå¯¹åº”çš„åˆ†åŒºå¯¹è±¡ç»™æ‚¨ã€‚</p>
<p>åˆ›å»ºä¸€ä¸ªåˆ†åŒºï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">err := cfg.NewSection(<span class="string">"new section"</span>)</span><br></pre></td></tr></table></figure>
<p>è·å–æ‰€æœ‰åˆ†åŒºå¯¹è±¡æˆ–åç§°ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sections := cfg.Sections()</span><br><span class="line">names := cfg.SectionStrings()</span><br></pre></td></tr></table></figure>
<h3 id="æ“ä½œé”®ï¼ˆKeyï¼‰"><a href="#æ“ä½œé”®ï¼ˆKeyï¼‰" class="headerlink" title="æ“ä½œé”®ï¼ˆKeyï¼‰"></a>æ“ä½œé”®ï¼ˆKeyï¼‰</h3><p>è·å–æŸä¸ªåˆ†åŒºä¸‹çš„é”®ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">key, err := cfg.Section(<span class="string">""</span>).GetKey(<span class="string">"key name"</span>)</span><br></pre></td></tr></table></figure>
<p>å’Œåˆ†åŒºä¸€æ ·ï¼Œæ‚¨ä¹Ÿå¯ä»¥ç›´æ¥è·å–é”®è€Œå¿½ç•¥é”™è¯¯å¤„ç†ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">key := cfg.Section(<span class="string">""</span>).Key(<span class="string">"key name"</span>)</span><br></pre></td></tr></table></figure>
<p>åˆ¤æ–­æŸä¸ªé”®æ˜¯å¦å­˜åœ¨ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yes := cfg.Section(<span class="string">""</span>).HasKey(<span class="string">"key name"</span>)</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºä¸€ä¸ªæ–°çš„é”®ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">err := cfg.Section(<span class="string">""</span>).NewKey(<span class="string">"name"</span>, <span class="string">"value"</span>)</span><br></pre></td></tr></table></figure>
<p>è·å–åˆ†åŒºä¸‹çš„æ‰€æœ‰é”®æˆ–é”®åï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">keys := cfg.Section(<span class="string">""</span>).Keys()</span><br><span class="line">names := cfg.Section(<span class="string">""</span>).KeyStrings()</span><br></pre></td></tr></table></figure>
<p>è·å–åˆ†åŒºä¸‹çš„æ‰€æœ‰é”®å€¼å¯¹çš„å…‹éš†ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hash := cfg.Section(<span class="string">""</span>).KeysHash()</span><br></pre></td></tr></table></figure>
<h3 id="æ“ä½œé”®å€¼ï¼ˆValueï¼‰"><a href="#æ“ä½œé”®å€¼ï¼ˆValueï¼‰" class="headerlink" title="æ“ä½œé”®å€¼ï¼ˆValueï¼‰"></a>æ“ä½œé”®å€¼ï¼ˆValueï¼‰</h3><p>è·å–ä¸€ä¸ªç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼ˆstringï¼‰çš„å€¼ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val := cfg.Section(<span class="string">""</span>).Key(<span class="string">"key name"</span>).String()</span><br></pre></td></tr></table></figure>
<p>è·å–å€¼çš„åŒæ—¶é€šè¿‡è‡ªå®šä¹‰å‡½æ•°è¿›è¡Œå¤„ç†éªŒè¯ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">val := cfg.Section(<span class="string">""</span>).Key(<span class="string">"key name"</span>).Validate(<span class="function"><span class="keyword">func</span><span class="params">(in <span class="keyword">string</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> <span class="built_in">len</span>(in) == <span class="number">0</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"default"</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> in</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ‚¨ä¸éœ€è¦ä»»ä½•å¯¹å€¼çš„è‡ªåŠ¨è½¬å˜åŠŸèƒ½ï¼ˆä¾‹å¦‚é€’å½’è¯»å–ï¼‰ï¼Œå¯ä»¥ç›´æ¥è·å–åŸå€¼ï¼ˆè¿™ç§æ–¹å¼æ€§èƒ½æœ€ä½³ï¼‰ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val := cfg.Section(<span class="string">""</span>).Key(<span class="string">"key name"</span>).Value()</span><br></pre></td></tr></table></figure>
<p>åˆ¤æ–­æŸä¸ªåŸå€¼æ˜¯å¦å­˜åœ¨ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yes := cfg.Section(<span class="string">""</span>).HasValue(<span class="string">"test value"</span>)</span><br></pre></td></tr></table></figure>
<p>è·å–å…¶å®ƒç±»å‹çš„å€¼ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¸ƒå°”å€¼çš„è§„åˆ™ï¼š</span></span><br><span class="line"><span class="comment">// true å½“å€¼ä¸ºï¼š1, t, T, TRUE, true, True, YES, yes, Yes, y, ON, on, On</span></span><br><span class="line"><span class="comment">// false å½“å€¼ä¸ºï¼š0, f, F, FALSE, false, False, NO, no, No, n, OFF, off, Off</span></span><br><span class="line">v, err = cfg.Section(<span class="string">""</span>).Key(<span class="string">"BOOL"</span>).Bool()</span><br><span class="line">v, err = cfg.Section(<span class="string">""</span>).Key(<span class="string">"FLOAT64"</span>).Float64()</span><br><span class="line">v, err = cfg.Section(<span class="string">""</span>).Key(<span class="string">"INT"</span>).Int()</span><br><span class="line">v, err = cfg.Section(<span class="string">""</span>).Key(<span class="string">"INT64"</span>).Int64()</span><br><span class="line">v, err = cfg.Section(<span class="string">""</span>).Key(<span class="string">"UINT"</span>).Uint()</span><br><span class="line">v, err = cfg.Section(<span class="string">""</span>).Key(<span class="string">"UINT64"</span>).Uint64()</span><br><span class="line">v, err = cfg.Section(<span class="string">""</span>).Key(<span class="string">"TIME"</span>).TimeFormat(time.RFC3339)</span><br><span class="line">v, err = cfg.Section(<span class="string">""</span>).Key(<span class="string">"TIME"</span>).Time() <span class="comment">// RFC3339</span></span><br><span class="line"></span><br><span class="line">v = cfg.Section(<span class="string">""</span>).Key(<span class="string">"BOOL"</span>).MustBool()</span><br><span class="line">v = cfg.Section(<span class="string">""</span>).Key(<span class="string">"FLOAT64"</span>).MustFloat64()</span><br><span class="line">v = cfg.Section(<span class="string">""</span>).Key(<span class="string">"INT"</span>).MustInt()</span><br><span class="line">v = cfg.Section(<span class="string">""</span>).Key(<span class="string">"INT64"</span>).MustInt64()</span><br><span class="line">v = cfg.Section(<span class="string">""</span>).Key(<span class="string">"UINT"</span>).MustUint()</span><br><span class="line">v = cfg.Section(<span class="string">""</span>).Key(<span class="string">"UINT64"</span>).MustUint64()</span><br><span class="line">v = cfg.Section(<span class="string">""</span>).Key(<span class="string">"TIME"</span>).MustTimeFormat(time.RFC3339)</span><br><span class="line">v = cfg.Section(<span class="string">""</span>).Key(<span class="string">"TIME"</span>).MustTime() <span class="comment">// RFC3339</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”± Must å¼€å¤´çš„æ–¹æ³•åå…è®¸æ¥æ”¶ä¸€ä¸ªç›¸åŒç±»å‹çš„å‚æ•°æ¥ä½œä¸ºé»˜è®¤å€¼ï¼Œ</span></span><br><span class="line"><span class="comment">// å½“é”®ä¸å­˜åœ¨æˆ–è€…è½¬æ¢å¤±è´¥æ—¶ï¼Œåˆ™ä¼šç›´æ¥è¿”å›è¯¥é»˜è®¤å€¼ã€‚</span></span><br><span class="line"><span class="comment">// ä½†æ˜¯ï¼ŒMustString æ–¹æ³•å¿…é¡»ä¼ é€’ä¸€ä¸ªé»˜è®¤å€¼ã€‚</span></span><br><span class="line"></span><br><span class="line">v = cfg.Seciont(<span class="string">""</span>).Key(<span class="string">"String"</span>).MustString(<span class="string">"default"</span>)</span><br><span class="line">v = cfg.Section(<span class="string">""</span>).Key(<span class="string">"BOOL"</span>).MustBool(<span class="literal">true</span>)</span><br><span class="line">v = cfg.Section(<span class="string">""</span>).Key(<span class="string">"FLOAT64"</span>).MustFloat64(<span class="number">1.25</span>)</span><br><span class="line">v = cfg.Section(<span class="string">""</span>).Key(<span class="string">"INT"</span>).MustInt(<span class="number">10</span>)</span><br><span class="line">v = cfg.Section(<span class="string">""</span>).Key(<span class="string">"INT64"</span>).MustInt64(<span class="number">99</span>)</span><br><span class="line">v = cfg.Section(<span class="string">""</span>).Key(<span class="string">"UINT"</span>).MustUint(<span class="number">3</span>)</span><br><span class="line">v = cfg.Section(<span class="string">""</span>).Key(<span class="string">"UINT64"</span>).MustUint64(<span class="number">6</span>)</span><br><span class="line">v = cfg.Section(<span class="string">""</span>).Key(<span class="string">"TIME"</span>).MustTimeFormat(time.RFC3339, time.Now())</span><br><span class="line">v = cfg.Section(<span class="string">""</span>).Key(<span class="string">"TIME"</span>).MustTime(time.Now()) <span class="comment">// RFC3339</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœæˆ‘çš„å€¼æœ‰å¥½å¤šè¡Œæ€ä¹ˆåŠï¼Ÿ</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[advance]</span></span><br><span class="line"><span class="attr">ADDRESS</span> = <span class="string">"""404 road,</span></span><br><span class="line"><span class="string">NotFound, State, 5000</span></span><br><span class="line"><span class="string">Earth"""</span></span><br></pre></td></tr></table></figure>
<p>å—¯å“¼ï¼Ÿå° caseï¼</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cfg.Section(<span class="string">"advance"</span>).Key(<span class="string">"ADDRESS"</span>).String()</span><br><span class="line"></span><br><span class="line"><span class="comment">/* --- start ---</span></span><br><span class="line"><span class="comment">404 road,</span></span><br><span class="line"><span class="comment">NotFound, State, 5000</span></span><br><span class="line"><span class="comment">Earth</span></span><br><span class="line"><span class="comment">------  end  --- */</span></span><br></pre></td></tr></table></figure>
<p>èµçˆ†äº†ï¼é‚£è¦æ˜¯æˆ‘å±äºä¸€è¡Œçš„å†…å®¹å†™ä¸ä¸‹æƒ³è¦å†™åˆ°ç¬¬äºŒè¡Œæ€ä¹ˆåŠï¼Ÿ</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[advance]</span></span><br><span class="line"><span class="attr">two_lines</span> = how about \</span><br><span class="line">	continuation lines?</span><br><span class="line"><span class="attr">lots_of_lines</span> = <span class="number">1</span> \</span><br><span class="line">	2 \</span><br><span class="line">	3 \</span><br><span class="line">	4</span><br></pre></td></tr></table></figure>
<p>ç®€ç›´æ˜¯å°èœä¸€ç¢Ÿï¼</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cfg.Section(<span class="string">"advance"</span>).Key(<span class="string">"two_lines"</span>).String() <span class="comment">// how about continuation lines?</span></span><br><span class="line">cfg.Section(<span class="string">"advance"</span>).Key(<span class="string">"lots_of_lines"</span>).String() <span class="comment">// 1 2 3 4</span></span><br></pre></td></tr></table></figure>
<p>å¯æ˜¯æˆ‘æœ‰æ—¶å€™è§‰å¾—ä¸¤è¡Œè¿åœ¨ä¸€èµ·ç‰¹åˆ«æ²¡åŠ²ï¼Œæ€ä¹ˆæ‰èƒ½ä¸è‡ªåŠ¨è¿æ¥ä¸¤è¡Œå‘¢ï¼Ÿ</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cfg, err := ini.LoadSources(ini.LoadOptions&#123;</span><br><span class="line">	IgnoreContinuation: <span class="literal">true</span>,</span><br><span class="line">&#125;, <span class="string">"filename"</span>)</span><br></pre></td></tr></table></figure>
<p>å“‡é ç»™åŠ›å•Šï¼</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå€¼ä¸¤ä¾§çš„å•å¼•å·ä¼šè¢«è‡ªåŠ¨å‰”é™¤ï¼š</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">foo</span> = <span class="string">"some value"</span> // foo: some value</span><br><span class="line"><span class="attr">bar</span> = <span class="string">'some value'</span> // bar: some value</span><br></pre></td></tr></table></figure>
<p>æœ‰æ—¶æ‚¨ä¼šè·å¾—åƒä» <a href="https://crowdin.com/" target="_blank" rel="noopener">Crowdin</a> ç½‘ç«™ä¸‹è½½çš„æ–‡ä»¶é‚£æ ·å…·æœ‰ç‰¹æ®Šæ ¼å¼çš„å€¼ï¼ˆå€¼ä½¿ç”¨åŒå¼•å·æ‹¬èµ·æ¥ï¼Œå†…éƒ¨çš„åŒå¼•å·è¢«è½¬ä¹‰ï¼‰ï¼š</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">create_repo</span>=<span class="string">"åˆ›å»ºäº†ä»“åº“ &lt;a href=\"%s\"&gt;%s&lt;/a&gt;"</span></span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆï¼Œæ€ä¹ˆè‡ªåŠ¨åœ°å°†è¿™ç±»å€¼è¿›è¡Œå¤„ç†å‘¢ï¼Ÿ</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cfg, err := ini.LoadSources(ini.LoadOptions&#123;UnescapeValueDoubleQuotes: <span class="literal">true</span>&#125;, <span class="string">"en-US.ini"</span>))</span><br><span class="line">cfg.Section(<span class="string">"&lt;name of your section&gt;"</span>).Key(<span class="string">"create_repo"</span>).String() </span><br><span class="line"><span class="comment">// You got: åˆ›å»ºäº†ä»“åº“ &lt;a href="%s"&gt;%s&lt;/a&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™å°±æ˜¯å…¨éƒ¨äº†ï¼Ÿå“ˆå“ˆï¼Œå½“ç„¶ä¸æ˜¯ã€‚</p>
<h4 id="æ“ä½œé”®å€¼çš„è¾…åŠ©æ–¹æ³•"><a href="#æ“ä½œé”®å€¼çš„è¾…åŠ©æ–¹æ³•" class="headerlink" title="æ“ä½œé”®å€¼çš„è¾…åŠ©æ–¹æ³•"></a>æ“ä½œé”®å€¼çš„è¾…åŠ©æ–¹æ³•</h4><p>è·å–é”®å€¼æ—¶è®¾å®šå€™é€‰å€¼ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">v = cfg.Section(<span class="string">""</span>).Key(<span class="string">"STRING"</span>).In(<span class="string">"default"</span>, []<span class="keyword">string</span>&#123;<span class="string">"str"</span>, <span class="string">"arr"</span>, <span class="string">"types"</span>&#125;)</span><br><span class="line">v = cfg.Section(<span class="string">""</span>).Key(<span class="string">"FLOAT64"</span>).InFloat64(<span class="number">1.1</span>, []<span class="keyword">float64</span>&#123;<span class="number">1.25</span>, <span class="number">2.5</span>, <span class="number">3.75</span>&#125;)</span><br><span class="line">v = cfg.Section(<span class="string">""</span>).Key(<span class="string">"INT"</span>).InInt(<span class="number">5</span>, []<span class="keyword">int</span>&#123;<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>&#125;)</span><br><span class="line">v = cfg.Section(<span class="string">""</span>).Key(<span class="string">"INT64"</span>).InInt64(<span class="number">10</span>, []<span class="keyword">int64</span>&#123;<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>&#125;)</span><br><span class="line">v = cfg.Section(<span class="string">""</span>).Key(<span class="string">"UINT"</span>).InUint(<span class="number">4</span>, []<span class="keyword">int</span>&#123;<span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>&#125;)</span><br><span class="line">v = cfg.Section(<span class="string">""</span>).Key(<span class="string">"UINT64"</span>).InUint64(<span class="number">8</span>, []<span class="keyword">int64</span>&#123;<span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>&#125;)</span><br><span class="line">v = cfg.Section(<span class="string">""</span>).Key(<span class="string">"TIME"</span>).InTimeFormat(time.RFC3339, time.Now(), []time.Time&#123;time1, time2, time3&#125;)</span><br><span class="line">v = cfg.Section(<span class="string">""</span>).Key(<span class="string">"TIME"</span>).InTime(time.Now(), []time.Time&#123;time1, time2, time3&#125;) <span class="comment">// RFC3339</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœè·å–åˆ°çš„å€¼ä¸æ˜¯å€™é€‰å€¼çš„ä»»æ„ä¸€ä¸ªï¼Œåˆ™ä¼šè¿”å›é»˜è®¤å€¼ï¼Œè€Œé»˜è®¤å€¼ä¸éœ€è¦æ˜¯å€™é€‰å€¼ä¸­çš„ä¸€å‘˜ã€‚</p>
<p>éªŒè¯è·å–çš„å€¼æ˜¯å¦åœ¨æŒ‡å®šèŒƒå›´å†…ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vals = cfg.Section(<span class="string">""</span>).Key(<span class="string">"FLOAT64"</span>).RangeFloat64(<span class="number">0.0</span>, <span class="number">1.1</span>, <span class="number">2.2</span>)</span><br><span class="line">vals = cfg.Section(<span class="string">""</span>).Key(<span class="string">"INT"</span>).RangeInt(<span class="number">0</span>, <span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line">vals = cfg.Section(<span class="string">""</span>).Key(<span class="string">"INT64"</span>).RangeInt64(<span class="number">0</span>, <span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line">vals = cfg.Section(<span class="string">""</span>).Key(<span class="string">"UINT"</span>).RangeUint(<span class="number">0</span>, <span class="number">3</span>, <span class="number">9</span>)</span><br><span class="line">vals = cfg.Section(<span class="string">""</span>).Key(<span class="string">"UINT64"</span>).RangeUint64(<span class="number">0</span>, <span class="number">3</span>, <span class="number">9</span>)</span><br><span class="line">vals = cfg.Section(<span class="string">""</span>).Key(<span class="string">"TIME"</span>).RangeTimeFormat(time.RFC3339, time.Now(), minTime, maxTime)</span><br><span class="line">vals = cfg.Section(<span class="string">""</span>).Key(<span class="string">"TIME"</span>).RangeTime(time.Now(), minTime, maxTime) <span class="comment">// RFC3339</span></span><br></pre></td></tr></table></figure>
<h5 id="è‡ªåŠ¨åˆ†å‰²é”®å€¼åˆ°åˆ‡ç‰‡ï¼ˆsliceï¼‰"><a href="#è‡ªåŠ¨åˆ†å‰²é”®å€¼åˆ°åˆ‡ç‰‡ï¼ˆsliceï¼‰" class="headerlink" title="è‡ªåŠ¨åˆ†å‰²é”®å€¼åˆ°åˆ‡ç‰‡ï¼ˆsliceï¼‰"></a>è‡ªåŠ¨åˆ†å‰²é”®å€¼åˆ°åˆ‡ç‰‡ï¼ˆsliceï¼‰</h5><p>å½“å­˜åœ¨æ— æ•ˆè¾“å…¥æ—¶ï¼Œä½¿ç”¨é›¶å€¼ä»£æ›¿ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Input: 1.1, 2.2, 3.3, 4.4 -&gt; [1.1 2.2 3.3 4.4]</span></span><br><span class="line"><span class="comment">// Input: how, 2.2, are, you -&gt; [0.0 2.2 0.0 0.0]</span></span><br><span class="line">vals = cfg.Section(<span class="string">""</span>).Key(<span class="string">"STRINGS"</span>).Strings(<span class="string">","</span>)</span><br><span class="line">vals = cfg.Section(<span class="string">""</span>).Key(<span class="string">"FLOAT64S"</span>).Float64s(<span class="string">","</span>)</span><br><span class="line">vals = cfg.Section(<span class="string">""</span>).Key(<span class="string">"INTS"</span>).Ints(<span class="string">","</span>)</span><br><span class="line">vals = cfg.Section(<span class="string">""</span>).Key(<span class="string">"INT64S"</span>).Int64s(<span class="string">","</span>)</span><br><span class="line">vals = cfg.Section(<span class="string">""</span>).Key(<span class="string">"UINTS"</span>).Uints(<span class="string">","</span>)</span><br><span class="line">vals = cfg.Section(<span class="string">""</span>).Key(<span class="string">"UINT64S"</span>).Uint64s(<span class="string">","</span>)</span><br><span class="line">vals = cfg.Section(<span class="string">""</span>).Key(<span class="string">"TIMES"</span>).Times(<span class="string">","</span>)</span><br></pre></td></tr></table></figure>
<p>ä»ç»“æœåˆ‡ç‰‡ä¸­å‰”é™¤æ— æ•ˆè¾“å…¥ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Input: 1.1, 2.2, 3.3, 4.4 -&gt; [1.1 2.2 3.3 4.4]</span></span><br><span class="line"><span class="comment">// Input: how, 2.2, are, you -&gt; [2.2]</span></span><br><span class="line">vals = cfg.Section(<span class="string">""</span>).Key(<span class="string">"FLOAT64S"</span>).ValidFloat64s(<span class="string">","</span>)</span><br><span class="line">vals = cfg.Section(<span class="string">""</span>).Key(<span class="string">"INTS"</span>).ValidInts(<span class="string">","</span>)</span><br><span class="line">vals = cfg.Section(<span class="string">""</span>).Key(<span class="string">"INT64S"</span>).ValidInt64s(<span class="string">","</span>)</span><br><span class="line">vals = cfg.Section(<span class="string">""</span>).Key(<span class="string">"UINTS"</span>).ValidUints(<span class="string">","</span>)</span><br><span class="line">vals = cfg.Section(<span class="string">""</span>).Key(<span class="string">"UINT64S"</span>).ValidUint64s(<span class="string">","</span>)</span><br><span class="line">vals = cfg.Section(<span class="string">""</span>).Key(<span class="string">"TIMES"</span>).ValidTimes(<span class="string">","</span>)</span><br></pre></td></tr></table></figure>
<p>å½“å­˜åœ¨æ— æ•ˆè¾“å…¥æ—¶ï¼Œç›´æ¥è¿”å›é”™è¯¯ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Input: 1.1, 2.2, 3.3, 4.4 -&gt; [1.1 2.2 3.3 4.4]</span></span><br><span class="line"><span class="comment">// Input: how, 2.2, are, you -&gt; error</span></span><br><span class="line">vals = cfg.Section(<span class="string">""</span>).Key(<span class="string">"FLOAT64S"</span>).StrictFloat64s(<span class="string">","</span>)</span><br><span class="line">vals = cfg.Section(<span class="string">""</span>).Key(<span class="string">"INTS"</span>).StrictInts(<span class="string">","</span>)</span><br><span class="line">vals = cfg.Section(<span class="string">""</span>).Key(<span class="string">"INT64S"</span>).StrictInt64s(<span class="string">","</span>)</span><br><span class="line">vals = cfg.Section(<span class="string">""</span>).Key(<span class="string">"UINTS"</span>).StrictUints(<span class="string">","</span>)</span><br><span class="line">vals = cfg.Section(<span class="string">""</span>).Key(<span class="string">"UINT64S"</span>).StrictUint64s(<span class="string">","</span>)</span><br><span class="line">vals = cfg.Section(<span class="string">""</span>).Key(<span class="string">"TIMES"</span>).StrictTimes(<span class="string">","</span>)</span><br></pre></td></tr></table></figure>
<h3 id="ä¿å­˜é…ç½®"><a href="#ä¿å­˜é…ç½®" class="headerlink" title="ä¿å­˜é…ç½®"></a>ä¿å­˜é…ç½®</h3><p>ç»ˆäºåˆ°äº†è¿™ä¸ªæ—¶åˆ»ï¼Œæ˜¯æ—¶å€™ä¿å­˜ä¸€ä¸‹é…ç½®äº†ã€‚</p>
<p>æ¯”è¾ƒåŸå§‹çš„åšæ³•æ˜¯è¾“å‡ºé…ç½®åˆ°æŸä¸ªæ–‡ä»¶ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line">err = cfg.SaveTo(<span class="string">"my.ini"</span>)</span><br><span class="line">err = cfg.SaveToIndent(<span class="string">"my.ini"</span>, <span class="string">"\t"</span>)</span><br></pre></td></tr></table></figure>
<p>å¦ä¸€ä¸ªæ¯”è¾ƒé«˜çº§çš„åšæ³•æ˜¯å†™å…¥åˆ°ä»»ä½•å®ç° <code>io.Writer</code> æ¥å£çš„å¯¹è±¡ä¸­ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line">cfg.WriteTo(writer)</span><br><span class="line">cfg.WriteToIndent(writer, <span class="string">"\t"</span>)</span><br></pre></td></tr></table></figure>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œç©ºæ ¼å°†è¢«ç”¨äºå¯¹é½é”®å€¼ä¹‹é—´çš„ç­‰å·ä»¥ç¾åŒ–è¾“å‡ºç»“æœï¼Œä»¥ä¸‹ä»£ç å¯ä»¥ç¦ç”¨è¯¥åŠŸèƒ½ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ini.PrettyFormat = <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<h2 id="é«˜çº§ç”¨æ³•"><a href="#é«˜çº§ç”¨æ³•" class="headerlink" title="é«˜çº§ç”¨æ³•"></a>é«˜çº§ç”¨æ³•</h2><h3 id="é€’å½’è¯»å–é”®å€¼"><a href="#é€’å½’è¯»å–é”®å€¼" class="headerlink" title="é€’å½’è¯»å–é”®å€¼"></a>é€’å½’è¯»å–é”®å€¼</h3><p>åœ¨è·å–æ‰€æœ‰é”®å€¼çš„è¿‡ç¨‹ä¸­ï¼Œç‰¹æ®Šè¯­æ³• <code>%(&lt;name&gt;)s</code> ä¼šè¢«åº”ç”¨ï¼Œå…¶ä¸­ <code>&lt;name&gt;</code> å¯ä»¥æ˜¯ç›¸åŒåˆ†åŒºæˆ–è€…é»˜è®¤åˆ†åŒºä¸‹çš„é”®åã€‚å­—ç¬¦ä¸² <code>%(&lt;name&gt;)s</code> ä¼šè¢«ç›¸åº”çš„é”®å€¼æ‰€æ›¿ä»£ï¼Œå¦‚æœæŒ‡å®šçš„é”®ä¸å­˜åœ¨ï¼Œåˆ™ä¼šç”¨ç©ºå­—ç¬¦ä¸²æ›¿ä»£ã€‚æ‚¨å¯ä»¥æœ€å¤šä½¿ç”¨ 99 å±‚çš„é€’å½’åµŒå¥—ã€‚</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">NAME</span> = ini</span><br><span class="line"></span><br><span class="line"><span class="section">[author]</span></span><br><span class="line"><span class="attr">NAME</span> = Unknwon</span><br><span class="line"><span class="attr">GITHUB</span> = https://github.com/%(NAME)s</span><br><span class="line"></span><br><span class="line"><span class="section">[package]</span></span><br><span class="line"><span class="attr">FULL_NAME</span> = github.com/go-ini/%(NAME)s</span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cfg.Section(<span class="string">"author"</span>).Key(<span class="string">"GITHUB"</span>).String()		<span class="comment">// https://github.com/Unknwon</span></span><br><span class="line">cfg.Section(<span class="string">"package"</span>).Key(<span class="string">"FULL_NAME"</span>).String()	<span class="comment">// github.com/go-ini/ini</span></span><br></pre></td></tr></table></figure>
<h3 id="è¯»å–çˆ¶å­åˆ†åŒº"><a href="#è¯»å–çˆ¶å­åˆ†åŒº" class="headerlink" title="è¯»å–çˆ¶å­åˆ†åŒº"></a>è¯»å–çˆ¶å­åˆ†åŒº</h3><p>æ‚¨å¯ä»¥åœ¨åˆ†åŒºåç§°ä¸­ä½¿ç”¨ <code>.</code> æ¥è¡¨ç¤ºä¸¤ä¸ªæˆ–å¤šä¸ªåˆ†åŒºä¹‹é—´çš„çˆ¶å­å…³ç³»ã€‚å¦‚æœæŸä¸ªé”®åœ¨å­åˆ†åŒºä¸­ä¸å­˜åœ¨ï¼Œåˆ™ä¼šå»å®ƒçš„çˆ¶åˆ†åŒºä¸­å†æ¬¡å¯»æ‰¾ï¼Œç›´åˆ°æ²¡æœ‰çˆ¶åˆ†åŒºä¸ºæ­¢ã€‚</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">NAME</span> = ini</span><br><span class="line"><span class="attr">VERSION</span> = v1</span><br><span class="line"><span class="attr">IMPORT_PATH</span> = gopkg.in/%(NAME)s.%(VERSION)s</span><br><span class="line"></span><br><span class="line"><span class="section">[package]</span></span><br><span class="line"><span class="attr">CLONE_URL</span> = https://%(IMPORT_PATH)s</span><br><span class="line"></span><br><span class="line"><span class="section">[package.sub]</span></span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cfg.Section(<span class="string">"package.sub"</span>).Key(<span class="string">"CLONE_URL"</span>).String()	<span class="comment">// https://gopkg.in/ini.v1</span></span><br></pre></td></tr></table></figure>
<h4 id="è·å–ä¸Šçº§çˆ¶åˆ†åŒºä¸‹çš„æ‰€æœ‰é”®å"><a href="#è·å–ä¸Šçº§çˆ¶åˆ†åŒºä¸‹çš„æ‰€æœ‰é”®å" class="headerlink" title="è·å–ä¸Šçº§çˆ¶åˆ†åŒºä¸‹çš„æ‰€æœ‰é”®å"></a>è·å–ä¸Šçº§çˆ¶åˆ†åŒºä¸‹çš„æ‰€æœ‰é”®å</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cfg.Section(<span class="string">"package.sub"</span>).ParentKeys() <span class="comment">// ["CLONE_URL"]</span></span><br></pre></td></tr></table></figure>
<h3 id="æ— æ³•è§£æçš„åˆ†åŒº"><a href="#æ— æ³•è§£æçš„åˆ†åŒº" class="headerlink" title="æ— æ³•è§£æçš„åˆ†åŒº"></a>æ— æ³•è§£æçš„åˆ†åŒº</h3><p>å¦‚æœé‡åˆ°ä¸€äº›æ¯”è¾ƒç‰¹æ®Šçš„åˆ†åŒºï¼Œå®ƒä»¬ä¸åŒ…å«å¸¸è§çš„é”®å€¼å¯¹ï¼Œè€Œæ˜¯æ²¡æœ‰å›ºå®šæ ¼å¼çš„çº¯æ–‡æœ¬ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ <code>LoadOptions.UnparsableSections</code> è¿›è¡Œå¤„ç†ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cfg, err := LoadSources(ini.LoadOptions&#123;UnparseableSections: []<span class="keyword">string</span>&#123;<span class="string">"COMMENTS"</span>&#125;&#125;, <span class="string">`[COMMENTS]</span></span><br><span class="line"><span class="string">&lt;1&gt;&lt;L.Slide#2&gt; This slide has the fuel listed in the wrong units &lt;e.1&gt;`</span>))</span><br><span class="line"></span><br><span class="line">body := cfg.Section(<span class="string">"COMMENTS"</span>).Body()</span><br><span class="line"></span><br><span class="line"><span class="comment">/* --- start ---</span></span><br><span class="line"><span class="comment">&lt;1&gt;&lt;L.Slide#2&gt; This slide has the fuel listed in the wrong units &lt;e.1&gt;</span></span><br><span class="line"><span class="comment">------  end  --- */</span></span><br></pre></td></tr></table></figure>
<h3 id="è¯»å–è‡ªå¢é”®å"><a href="#è¯»å–è‡ªå¢é”®å" class="headerlink" title="è¯»å–è‡ªå¢é”®å"></a>è¯»å–è‡ªå¢é”®å</h3><p>å¦‚æœæ•°æ®æºä¸­çš„é”®åä¸º <code>-</code>ï¼Œåˆ™è®¤ä¸ºè¯¥é”®ä½¿ç”¨äº†è‡ªå¢é”®åçš„ç‰¹æ®Šè¯­æ³•ã€‚è®¡æ•°å™¨ä» 1 å¼€å§‹ï¼Œå¹¶ä¸”åˆ†åŒºä¹‹é—´æ˜¯ç›¸äº’ç‹¬ç«‹çš„ã€‚</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[features]</span></span><br><span class="line">-: Support read/write comments of keys and sections</span><br><span class="line">-: Support auto-increment of key names</span><br><span class="line">-: Support load multiple files to overwrite key values</span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cfg.Section(<span class="string">"features"</span>).KeyStrings()	<span class="comment">// []&#123;"#1", "#2", "#3"&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="æ˜ å°„åˆ°ç»“æ„"><a href="#æ˜ å°„åˆ°ç»“æ„" class="headerlink" title="æ˜ å°„åˆ°ç»“æ„"></a>æ˜ å°„åˆ°ç»“æ„</h3><p>æƒ³è¦ä½¿ç”¨æ›´åŠ é¢å‘å¯¹è±¡çš„æ–¹å¼ç©è½¬ INI å—ï¼Ÿå¥½ä¸»æ„ã€‚</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Name</span> = Unknwon</span><br><span class="line"><span class="attr">age</span> = <span class="number">21</span></span><br><span class="line"><span class="attr">Male</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">Born</span> = <span class="number">1993</span>-<span class="number">01</span>-<span class="number">01</span>T20:<span class="number">17</span>:<span class="number">05</span>Z</span><br><span class="line"></span><br><span class="line"><span class="section">[Note]</span></span><br><span class="line"><span class="attr">Content</span> = Hi is a good man!</span><br><span class="line"><span class="attr">Cities</span> = HangZhou, Boston</span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Note <span class="keyword">struct</span> &#123;</span><br><span class="line">	Content <span class="keyword">string</span></span><br><span class="line">	Cities  []<span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">	Age  <span class="keyword">int</span> <span class="string">`ini:"age"`</span></span><br><span class="line">	Male <span class="keyword">bool</span></span><br><span class="line">	Born time.Time</span><br><span class="line">	Note</span><br><span class="line">	Created time.Time <span class="string">`ini:"-"`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	cfg, err := ini.Load(<span class="string">"path/to/ini"</span>)</span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line">	p := <span class="built_in">new</span>(Person)</span><br><span class="line">	err = cfg.MapTo(p)</span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// ä¸€åˆ‡ç«Ÿå¯ä»¥å¦‚æ­¤çš„ç®€å•ã€‚</span></span><br><span class="line">	err = ini.MapTo(p, <span class="string">"path/to/ini"</span>)</span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// å—¯å“¼ï¼Ÿåªéœ€è¦æ˜ å°„ä¸€ä¸ªåˆ†åŒºå—ï¼Ÿ</span></span><br><span class="line">	n := <span class="built_in">new</span>(Note)</span><br><span class="line">	err = cfg.Section(<span class="string">"Note"</span>).MapTo(n)</span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç»“æ„çš„å­—æ®µæ€ä¹ˆè®¾ç½®é»˜è®¤å€¼å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œåªè¦åœ¨æ˜ å°„ä¹‹å‰å¯¹æŒ‡å®šå­—æ®µè¿›è¡Œèµ‹å€¼å°±å¯ä»¥äº†ã€‚å¦‚æœé”®æœªæ‰¾åˆ°æˆ–è€…ç±»å‹é”™è¯¯ï¼Œè¯¥å€¼ä¸ä¼šå‘ç”Ÿæ”¹å˜ã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line">p := &amp;Person&#123;</span><br><span class="line">	Name: <span class="string">"Joe"</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ç© INI çœŸçš„å¥½é…·å•Šï¼ç„¶è€Œï¼Œå¦‚æœä¸èƒ½è¿˜ç»™æˆ‘åŸæ¥çš„é…ç½®æ–‡ä»¶ï¼Œæœ‰ä»€ä¹ˆåµç”¨ï¼Ÿ</p>
<h3 id="ä»ç»“æ„åå°„"><a href="#ä»ç»“æ„åå°„" class="headerlink" title="ä»ç»“æ„åå°„"></a>ä»ç»“æ„åå°„</h3><p>å¯æ˜¯ï¼Œæˆ‘æœ‰è¯´ä¸èƒ½å—ï¼Ÿ</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Embeded <span class="keyword">struct</span> &#123;</span><br><span class="line">	Dates  []time.Time <span class="string">`delim:"|" comment:"Time data"`</span></span><br><span class="line">	Places []<span class="keyword">string</span>    <span class="string">`ini:"places,omitempty"`</span></span><br><span class="line">	None   []<span class="keyword">int</span>       <span class="string">`ini:",omitempty"`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Author <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name      <span class="keyword">string</span> <span class="string">`ini:"NAME"`</span></span><br><span class="line">	Male      <span class="keyword">bool</span></span><br><span class="line">	Age       <span class="keyword">int</span> <span class="string">`comment:"Author's age"`</span></span><br><span class="line">	GPA       <span class="keyword">float64</span></span><br><span class="line">	NeverMind <span class="keyword">string</span> <span class="string">`ini:"-"`</span></span><br><span class="line">	*Embeded <span class="string">`comment:"Embeded section"`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := &amp;Author&#123;<span class="string">"Unknwon"</span>, <span class="literal">true</span>, <span class="number">21</span>, <span class="number">2.8</span>, <span class="string">""</span>,</span><br><span class="line">		&amp;Embeded&#123;</span><br><span class="line">			[]time.Time&#123;time.Now(), time.Now()&#125;,</span><br><span class="line">			[]<span class="keyword">string</span>&#123;<span class="string">"HangZhou"</span>, <span class="string">"Boston"</span>&#125;,</span><br><span class="line">			[]<span class="keyword">int</span>&#123;&#125;,</span><br><span class="line">		&#125;&#125;</span><br><span class="line">	cfg := ini.Empty()</span><br><span class="line">	err = ini.ReflectFrom(cfg, a)</span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç§ç§ï¼Œå¥‡è¿¹å‘ç”Ÿäº†ã€‚</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">NAME</span> = Unknwon</span><br><span class="line"><span class="attr">Male</span> = <span class="literal">true</span></span><br><span class="line"><span class="comment">; Author's age</span></span><br><span class="line"><span class="attr">Age</span> = <span class="number">21</span></span><br><span class="line"><span class="attr">GPA</span> = <span class="number">2.8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; Embeded section</span></span><br><span class="line"><span class="section">[Embeded]</span></span><br><span class="line"><span class="comment">; Time data</span></span><br><span class="line"><span class="attr">Dates</span> = <span class="number">2015</span>-<span class="number">08</span>-<span class="number">07</span>T22:<span class="number">14</span>:<span class="number">22</span>+<span class="number">08</span>:<span class="number">00</span>|<span class="number">2015</span>-<span class="number">08</span>-<span class="number">07</span>T22:<span class="number">14</span>:<span class="number">22</span>+<span class="number">08</span>:<span class="number">00</span></span><br><span class="line"><span class="attr">places</span> = HangZhou,Boston</span><br></pre></td></tr></table></figure>
<h4 id="åç§°æ˜ å°„å™¨ï¼ˆName-Mapperï¼‰"><a href="#åç§°æ˜ å°„å™¨ï¼ˆName-Mapperï¼‰" class="headerlink" title="åç§°æ˜ å°„å™¨ï¼ˆName Mapperï¼‰"></a>åç§°æ˜ å°„å™¨ï¼ˆName Mapperï¼‰</h4><p>ä¸ºäº†èŠ‚çœæ‚¨çš„æ—¶é—´å¹¶ç®€åŒ–ä»£ç ï¼Œæœ¬åº“æ”¯æŒç±»å‹ä¸º <a href="https://gowalker.org/gopkg.in/ini.v1#NameMapper" target="_blank" rel="noopener"><code>NameMapper</code></a> çš„åç§°æ˜ å°„å™¨ï¼Œè¯¥æ˜ å°„å™¨è´Ÿè´£ç»“æ„å­—æ®µåä¸åˆ†åŒºåå’Œé”®åä¹‹é—´çš„æ˜ å°„ã€‚</p>
<p>ç›®å‰æœ‰ 2 æ¬¾å†…ç½®çš„æ˜ å°„å™¨ï¼š</p>
<ul>
<li><code>AllCapsUnderscore</code>ï¼šè¯¥æ˜ å°„å™¨å°†å­—æ®µåè½¬æ¢è‡³æ ¼å¼ <code>ALL_CAPS_UNDERSCORE</code> åå†å»åŒ¹é…åˆ†åŒºåå’Œé”®åã€‚</li>
<li><code>TitleUnderscore</code>ï¼šè¯¥æ˜ å°„å™¨å°†å­—æ®µåè½¬æ¢è‡³æ ¼å¼ <code>title_underscore</code> åå†å»åŒ¹é…åˆ†åŒºåå’Œé”®åã€‚</li>
</ul>
<p>ä½¿ç”¨æ–¹æ³•ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Info <span class="keyword">struct</span>&#123;</span><br><span class="line">	PackageName <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	err = ini.MapToWithMapper(&amp;Info&#123;&#125;, ini.TitleUnderscore, []<span class="keyword">byte</span>(<span class="string">"package_name=ini"</span>))</span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">	cfg, err := ini.Load([]<span class="keyword">byte</span>(<span class="string">"PACKAGE_NAME=ini"</span>))</span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line">	info := <span class="built_in">new</span>(Info)</span><br><span class="line">	cfg.NameMapper = ini.AllCapsUnderscore</span><br><span class="line">	err = cfg.MapTo(info)</span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨å‡½æ•° <code>ini.ReflectFromWithMapper</code> æ—¶ä¹Ÿå¯åº”ç”¨ç›¸åŒçš„è§„åˆ™ã€‚</p>
<h4 id="å€¼æ˜ å°„å™¨ï¼ˆValue-Mapperï¼‰"><a href="#å€¼æ˜ å°„å™¨ï¼ˆValue-Mapperï¼‰" class="headerlink" title="å€¼æ˜ å°„å™¨ï¼ˆValue Mapperï¼‰"></a>å€¼æ˜ å°„å™¨ï¼ˆValue Mapperï¼‰</h4><p>å€¼æ˜ å°„å™¨å…è®¸ä½¿ç”¨ä¸€ä¸ªè‡ªå®šä¹‰å‡½æ•°è‡ªåŠ¨å±•å¼€å€¼çš„å…·ä½“å†…å®¹ï¼Œä¾‹å¦‚ï¼šè¿è¡Œæ—¶è·å–ç¯å¢ƒå˜é‡ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Env <span class="keyword">struct</span> &#123;</span><br><span class="line">	Foo <span class="keyword">string</span> <span class="string">`ini:"foo"`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	cfg, err := ini.Load([]<span class="keyword">byte</span>(<span class="string">"[env]\nfoo = $&#123;MY_VAR&#125;\n"</span>)</span><br><span class="line">	cfg.ValueMapper = os.ExpandEnv</span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line">	env := &amp;Env&#123;&#125;</span><br><span class="line">	err = cfg.Section(<span class="string">"env"</span>).MapTo(env)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ¬ä¾‹ä¸­ï¼Œ<code>env.Foo</code> å°†ä¼šæ˜¯è¿è¡Œæ—¶æ‰€è·å–åˆ°ç¯å¢ƒå˜é‡ <code>MY_VAR</code> çš„å€¼ã€‚</p>
<h4 id="æ˜ å°„-åå°„çš„å…¶å®ƒè¯´æ˜"><a href="#æ˜ å°„-åå°„çš„å…¶å®ƒè¯´æ˜" class="headerlink" title="æ˜ å°„/åå°„çš„å…¶å®ƒè¯´æ˜"></a>æ˜ å°„/åå°„çš„å…¶å®ƒè¯´æ˜</h4><p>ä»»ä½•åµŒå…¥çš„ç»“æ„éƒ½ä¼šè¢«é»˜è®¤è®¤ä½œä¸€ä¸ªä¸åŒçš„åˆ†åŒºï¼Œå¹¶ä¸”ä¸ä¼šè‡ªåŠ¨äº§ç”Ÿæ‰€è°“çš„çˆ¶å­åˆ†åŒºå…³è”ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Child <span class="keyword">struct</span> &#123;</span><br><span class="line">	Age <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Parent <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">	Child</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Config <span class="keyword">struct</span> &#123;</span><br><span class="line">	City <span class="keyword">string</span></span><br><span class="line">	Parent</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¤ºä¾‹é…ç½®æ–‡ä»¶ï¼š</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">City</span> = Boston</span><br><span class="line"></span><br><span class="line"><span class="section">[Parent]</span></span><br><span class="line"><span class="attr">Name</span> = Unknwon</span><br><span class="line"></span><br><span class="line"><span class="section">[Child]</span></span><br><span class="line"><span class="attr">Age</span> = <span class="number">21</span></span><br></pre></td></tr></table></figure>
<p>å¾ˆå¥½ï¼Œä½†æ˜¯ï¼Œæˆ‘å°±æ˜¯è¦åµŒå…¥ç»“æ„ä¹Ÿåœ¨åŒä¸€ä¸ªåˆ†åŒºã€‚å¥½å§ï¼Œä½ çˆ¹æ˜¯æåˆšï¼</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Child <span class="keyword">struct</span> &#123;</span><br><span class="line">	Age <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Parent <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">	Child <span class="string">`ini:"Parent"`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Config <span class="keyword">struct</span> &#123;</span><br><span class="line">	City <span class="keyword">string</span></span><br><span class="line">	Parent</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¤ºä¾‹é…ç½®æ–‡ä»¶ï¼š</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">City</span> = Boston</span><br><span class="line"></span><br><span class="line"><span class="section">[Parent]</span></span><br><span class="line"><span class="attr">Name</span> = Unknwon</span><br><span class="line"><span class="attr">Age</span> = <span class="number">21</span></span><br></pre></td></tr></table></figure>
<h2 id="è·å–å¸®åŠ©"><a href="#è·å–å¸®åŠ©" class="headerlink" title="è·å–å¸®åŠ©"></a>è·å–å¸®åŠ©</h2><ul>
<li><a href="https://gowalker.org/gopkg.in/ini.v1" target="_blank" rel="noopener">API æ–‡æ¡£</a></li>
<li><a href="https://github.com/go-ini/ini/issues/new" target="_blank" rel="noopener">åˆ›å»ºå·¥å•</a></li>
</ul>
<h2 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h2><h3 id="å­—æ®µ-BlockMode-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#å­—æ®µ-BlockMode-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="å­—æ®µ BlockMode æ˜¯ä»€ä¹ˆï¼Ÿ"></a>å­—æ®µ <code>BlockMode</code> æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæœ¬åº“ä¼šåœ¨æ‚¨è¿›è¡Œè¯»å†™æ“ä½œæ—¶é‡‡ç”¨é”æœºåˆ¶æ¥ç¡®ä¿æ•°æ®æ—¶é—´ã€‚ä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨éå¸¸ç¡®å®šåªè¿›è¡Œè¯»æ“ä½œã€‚æ­¤æ—¶ï¼Œæ‚¨å¯ä»¥é€šè¿‡è®¾ç½® <code>cfg.BlockMode = false</code> æ¥å°†è¯»æ“ä½œæå‡å¤§çº¦ <strong>50-70%</strong> çš„æ€§èƒ½ã€‚</p>
<h3 id="ä¸ºä»€ä¹ˆè¦å†™å¦ä¸€ä¸ª-INI-è§£æåº“ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦å†™å¦ä¸€ä¸ª-INI-è§£æåº“ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦å†™å¦ä¸€ä¸ª INI è§£æåº“ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦å†™å¦ä¸€ä¸ª INI è§£æåº“ï¼Ÿ</h3><p>è®¸å¤šäººéƒ½åœ¨ä½¿ç”¨æˆ‘çš„ <a href="https://github.com/Unknwon/goconfig" target="_blank" rel="noopener">goconfig</a> æ¥å®Œæˆå¯¹ INI æ–‡ä»¶çš„æ“ä½œï¼Œä½†æˆ‘å¸Œæœ›ä½¿ç”¨æ›´åŠ  Go é£æ ¼çš„ä»£ç ã€‚å¹¶ä¸”å½“æ‚¨è®¾ç½® <code>cfg.BlockMode = false</code> æ—¶ï¼Œä¼šæœ‰å¤§çº¦ <strong>10-30%</strong> çš„æ€§èƒ½æå‡ã€‚</p>
<p>ä¸ºäº†åšå‡ºè¿™äº›æ”¹å˜ï¼Œæˆ‘å¿…é¡»å¯¹ API è¿›è¡Œç ´åï¼Œæ‰€ä»¥æ–°å¼€ä¸€ä¸ªä»“åº“æ˜¯æœ€å®‰å…¨çš„åšæ³•ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæœ¬åº“ç›´æ¥ä½¿ç”¨ <code>gopkg.in</code> æ¥è¿›è¡Œç‰ˆæœ¬åŒ–å‘å¸ƒã€‚ï¼ˆå…¶å®çœŸç›¸æ˜¯å¯¼å…¥è·¯å¾„æ›´çŸ­äº†ï¼‰</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://zhanghongtong.github.io/2018/05/14/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="å¼ å¥‡æ€ª">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¼ å¥‡æ€ªçš„blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/14/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-14T14:46:13+08:00">
                2018-05-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="å¼ å¥‡æ€ª" />
          <p class="site-author-name" itemprop="name">å¼ å¥‡æ€ª</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">30</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">15</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">å¼ å¥‡æ€ª</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  





  

  

  

  

  

  

</body>
</html>
